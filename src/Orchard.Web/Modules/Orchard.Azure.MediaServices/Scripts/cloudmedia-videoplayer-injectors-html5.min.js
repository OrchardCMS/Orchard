var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},Orchard;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.isSupported=function(){var t=document.createElement("video"),e=t&&!!t.canPlayType;return this.debug("Browser supports HTML5 video: {0}",e),this.debug("isSupported() returns {0}.",e),e},e.prototype.inject=function(){var t=this,e=_(this.filteredAssets().ThumbnailAssets).first();this.debug("Injecting player into element '{0}'.",this.container.id);var r=$("<video controls>").attr("width",this.playerWidth).attr("height",this.playerHeight);e&&r.attr("poster",e.MainFileUrl),this.autoPlay&&r.attr("autoplay","");var a=[];if(_(this.assetData.DynamicVideoAssets).forEach(function(e){var r=$("<source>").attr("src",e.SmoothStreamingUrl).attr("type","application/vnd.ms-sstr+xml"),i=$("<source>").attr("src",e.HlsUrl).attr("type","application/x-mpegURL"),n=$("<source>").attr("src",e.MpegDashUrl).attr("type","application/dash+xml");t.applyMediaQueries&&e.MediaQuery&&$([r,i,n]).attr("media",e.MediaQuery),a.push(r,i,n)}),_(this.assetData.DynamicVideoAssets).forEach(function(e){_(e.EncoderMetadata&&e.EncoderMetadata.AssetFiles||[]).filter(function(t){return _(t.VideoTracks).any()}).sort(function(t){return t.Bitrate}).reverse().forEach(function(r){var i=new URI(e.MainFileUrl).filename(r.Name),n=$("<source>").attr("src",i.toString()).attr("type",r.MimeType);t.applyMediaQueries&&e.MediaQuery&&n.attr("media",e.MediaQuery),a.push(n)})}),_(this.assetData.VideoAssets).forEach(function(e){var r=$("<source>").attr("src",e.MainFileUrl).attr("type",e.MimeType);t.applyMediaQueries&&e.MediaQuery&&r.attr("media",e.MediaQuery),a.push(r)}),_(this.filteredAssets().SubtitleAssets).forEach(function(t){var e=$('<track kind="captions">').attr("label",t.Name).attr("src",t.MainFileUrl).attr("srclang",t.Language);a.push(e)}),!_(a).any())return this.debug("No sources available; cleaning up container and faulting this injector."),void this.fault();$(a).each(function(t,e){$(e).appendTo(r)}),r.appendTo(this.container);var i=_(a).last()[0],n=function(e){t.debug("Error detected; cleaning up container and faulting this injector."),t.fault()};i.addEventListener("error",n,!1),r.on("error",n)},e.prototype.debug=function(e){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];t.prototype.debug.call(this,"Html5Injector: "+e,r)},e}(t.Injector);t.Html5Injector=e}(e=t.Injectors||(t.Injectors={}))}(e=t.VideoPlayer||(t.VideoPlayer={}))}(e=t.MediaServices||(t.MediaServices={}))}(e=t.Azure||(t.Azure={}))}(Orchard||(Orchard={}));
