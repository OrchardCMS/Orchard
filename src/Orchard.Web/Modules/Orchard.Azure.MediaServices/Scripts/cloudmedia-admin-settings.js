/*
** NOTE: This file is generated by Gulp and should not be edited directly!
** Any changes made directly to this file will be overwritten next time its asset group is processed by Gulp.
*/

/// <reference path="Typings/jquery.d.ts" />
/// <reference path="Typings/jqueryui.d.ts" />
/// <reference path="Typings/knockout.d.ts" />
var Orchard;
(function (Orchard) {
    var Azure;
    (function (Azure) {
        var MediaServices;
        (function (MediaServices) {
            var Admin;
            (function (Admin) {
                var Settings;
                (function (Settings) {
                    var StringItem = (function () {
                        function StringItem(value) {
                            this.value = ko.observable(value);
                        }
                        return StringItem;
                    })();
                    Settings.StringItem = StringItem;
                    var EncodingPreset = (function () {
                        function EncodingPreset(name, customXml) {
                            this.name = ko.observable(name);
                            this.customXml = ko.observable(customXml);
                            this.isExpanded = ko.observable(false);
                            this.type = ko.computed(function () {
                                var customXml = this.customXml();
                                if (!!customXml && customXml.length > 0)
                                    return "Custom preset";
                                return "Standard preset";
                            }, this);
                        }
                        EncodingPreset.prototype.toggle = function () {
                            this.isExpanded(!this.isExpanded());
                        };
                        return EncodingPreset;
                    })();
                    Settings.EncodingPreset = EncodingPreset;
                    Settings.clientViewModel = {
                        wamsEncodingPresets: ko.observableArray(),
                        defaultWamsEncodingPresetIndex: ko.observable(),
                        subtitleLanguages: ko.observableArray()
                    };
                    function deleteWamsEncodingPreset(preset) {
                        var removedIndex = Settings.clientViewModel.wamsEncodingPresets.indexOf(preset);
                        Settings.clientViewModel.wamsEncodingPresets.remove(preset);
                        if (removedIndex === Settings.clientViewModel.defaultWamsEncodingPresetIndex())
                            Settings.clientViewModel.defaultWamsEncodingPresetIndex(0);
                        else if (removedIndex < Settings.clientViewModel.defaultWamsEncodingPresetIndex())
                            Settings.clientViewModel.defaultWamsEncodingPresetIndex(Settings.clientViewModel.defaultWamsEncodingPresetIndex() - 1);
                    }
                    Settings.deleteWamsEncodingPreset = deleteWamsEncodingPreset;
                    function addNewWamsEncodingPreset() {
                        Settings.clientViewModel.wamsEncodingPresets.push(new EncodingPreset("Unnamed", null));
                        $("#presets-table tbody:first-of-type tr:last-of-type td:nth-child(2) input").focus().select();
                    }
                    Settings.addNewWamsEncodingPreset = addNewWamsEncodingPreset;
                    function deleteSubtitleLanguage(languageCultureCode) {
                        Settings.clientViewModel.subtitleLanguages.remove(languageCultureCode);
                    }
                    Settings.deleteSubtitleLanguage = deleteSubtitleLanguage;
                    function addNewSubtitleLanguage() {
                        Settings.clientViewModel.subtitleLanguages.push(new StringItem("Unnamed"));
                        $("#languages-table tbody:first-of-type tr:last-of-type td:nth-child(1) input").focus().select();
                    }
                    Settings.addNewSubtitleLanguage = addNewSubtitleLanguage;
                    $(function () {
                        $.each(initWamsEncodingPresets, function (presetIndex, preset) {
                            Settings.clientViewModel.wamsEncodingPresets.push(new EncodingPreset(preset.name, preset.customXml));
                        });
                        Settings.clientViewModel.defaultWamsEncodingPresetIndex(initDefaultWamsEncodingPresetIndex);
                        $.each(initSubtitleLanguages, function (languageIndex, languageCultureCode) {
                            Settings.clientViewModel.subtitleLanguages.push(new StringItem(languageCultureCode));
                        });
                        ko.applyBindings(Settings.clientViewModel);
                        var localStorage = window["localStorage"];
                        $("#tabs").tabs({
                            activate: function () {
                                if (localStorage && localStorage.setItem)
                                    localStorage.setItem("selectedCloudMediaSettingsTab", $("#tabs").tabs("option", "active"));
                            },
                            active: localStorage && localStorage.getItem ? localStorage.getItem("selectedCloudMediaSettingsTab") : null
                        }).show();
                    });
                })(Settings = Admin.Settings || (Admin.Settings = {}));
            })(Admin = MediaServices.Admin || (MediaServices.Admin = {}));
        })(MediaServices = Azure.MediaServices || (Azure.MediaServices = {}));
    })(Azure = Orchard.Azure || (Orchard.Azure = {}));
})(Orchard || (Orchard = {}));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNsb3VkbWVkaWEtYWRtaW4tc2V0dGluZ3MuanMiLCJjbG91ZG1lZGlhLWFkbWluLXNldHRpbmdzLnRzIl0sIm5hbWVzIjpbIk9yY2hhcmQiLCJPcmNoYXJkLkF6dXJlIiwiT3JjaGFyZC5BenVyZS5NZWRpYVNlcnZpY2VzIiwiT3JjaGFyZC5BenVyZS5NZWRpYVNlcnZpY2VzLkFkbWluIiwiT3JjaGFyZC5BenVyZS5NZWRpYVNlcnZpY2VzLkFkbWluLlNldHRpbmdzIiwiT3JjaGFyZC5BenVyZS5NZWRpYVNlcnZpY2VzLkFkbWluLlNldHRpbmdzLlN0cmluZ0l0ZW0iLCJPcmNoYXJkLkF6dXJlLk1lZGlhU2VydmljZXMuQWRtaW4uU2V0dGluZ3MuU3RyaW5nSXRlbS5jb25zdHJ1Y3RvciIsIk9yY2hhcmQuQXp1cmUuTWVkaWFTZXJ2aWNlcy5BZG1pbi5TZXR0aW5ncy5FbmNvZGluZ1ByZXNldCIsIk9yY2hhcmQuQXp1cmUuTWVkaWFTZXJ2aWNlcy5BZG1pbi5TZXR0aW5ncy5FbmNvZGluZ1ByZXNldC5jb25zdHJ1Y3RvciIsIk9yY2hhcmQuQXp1cmUuTWVkaWFTZXJ2aWNlcy5BZG1pbi5TZXR0aW5ncy5FbmNvZGluZ1ByZXNldC50b2dnbGUiLCJPcmNoYXJkLkF6dXJlLk1lZGlhU2VydmljZXMuQWRtaW4uU2V0dGluZ3MuZGVsZXRlV2Ftc0VuY29kaW5nUHJlc2V0IiwiT3JjaGFyZC5BenVyZS5NZWRpYVNlcnZpY2VzLkFkbWluLlNldHRpbmdzLmFkZE5ld1dhbXNFbmNvZGluZ1ByZXNldCIsIk9yY2hhcmQuQXp1cmUuTWVkaWFTZXJ2aWNlcy5BZG1pbi5TZXR0aW5ncy5kZWxldGVTdWJ0aXRsZUxhbmd1YWdlIiwiT3JjaGFyZC5BenVyZS5NZWRpYVNlcnZpY2VzLkFkbWluLlNldHRpbmdzLmFkZE5ld1N1YnRpdGxlTGFuZ3VhZ2UiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxBQ0xBLDRDQUE0QztBQUM1Qyw4Q0FBOEM7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dCI6W251bGwsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJUeXBpbmdzL2pxdWVyeS5kLnRzXCIgLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJUeXBpbmdzL2pxdWVyeXVpLmQudHNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlR5cGluZ3Mva25vY2tvdXQuZC50c1wiIC8+XG5cbmRlY2xhcmUgdmFyIGluaXRXYW1zRW5jb2RpbmdQcmVzZXRzOiBhbnlbXTtcbmRlY2xhcmUgdmFyIGluaXREZWZhdWx0V2Ftc0VuY29kaW5nUHJlc2V0SW5kZXg6IG51bWJlcjtcbmRlY2xhcmUgdmFyIGluaXRTdWJ0aXRsZUxhbmd1YWdlczogc3RyaW5nW107XG5cbm1vZHVsZSBPcmNoYXJkLkF6dXJlLk1lZGlhU2VydmljZXMuQWRtaW4uU2V0dGluZ3Mge1xuXG4gICAgZXhwb3J0IGNsYXNzIFN0cmluZ0l0ZW0ge1xuICAgICAgICBjb25zdHJ1Y3Rvcih2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0ga28ub2JzZXJ2YWJsZSh2YWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgdmFsdWU6IEtub2Nrb3V0T2JzZXJ2YWJsZTxzdHJpbmc+O1xuICAgIH1cblxuICAgIGV4cG9ydCBjbGFzcyBFbmNvZGluZ1ByZXNldCB7XG4gICAgICAgIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZywgY3VzdG9tWG1sOiBzdHJpbmcpIHtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IGtvLm9ic2VydmFibGUobmFtZSk7XG4gICAgICAgICAgICB0aGlzLmN1c3RvbVhtbCA9IGtvLm9ic2VydmFibGUoY3VzdG9tWG1sKTtcbiAgICAgICAgICAgIHRoaXMuaXNFeHBhbmRlZCA9IGtvLm9ic2VydmFibGUoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy50eXBlID0ga28uY29tcHV0ZWQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBjdXN0b21YbWw6IHN0cmluZyA9IHRoaXMuY3VzdG9tWG1sKCk7XG4gICAgICAgICAgICAgICAgaWYgKCEhY3VzdG9tWG1sICYmIGN1c3RvbVhtbC5sZW5ndGggPiAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJDdXN0b20gcHJlc2V0XCI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiU3RhbmRhcmQgcHJlc2V0XCI7XG4gICAgICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBuYW1lOiBLbm9ja291dE9ic2VydmFibGU8c3RyaW5nPjtcbiAgICAgICAgcHVibGljIGN1c3RvbVhtbDogS25vY2tvdXRPYnNlcnZhYmxlPHN0cmluZz47XG4gICAgICAgIHB1YmxpYyBpc0V4cGFuZGVkOiBLbm9ja291dE9ic2VydmFibGU8Ym9vbGVhbj47XG4gICAgICAgIHB1YmxpYyB0eXBlOiBLbm9ja291dENvbXB1dGVkPHN0cmluZz47XG5cbiAgICAgICAgcHVibGljIHRvZ2dsZSgpIHtcbiAgICAgICAgICAgIHRoaXMuaXNFeHBhbmRlZCghdGhpcy5pc0V4cGFuZGVkKCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQ2xpZW50Vmlld01vZGVsIHtcbiAgICAgICAgd2Ftc0VuY29kaW5nUHJlc2V0czogS25vY2tvdXRPYnNlcnZhYmxlQXJyYXk8RW5jb2RpbmdQcmVzZXQ+O1xuICAgICAgICBkZWZhdWx0V2Ftc0VuY29kaW5nUHJlc2V0SW5kZXg6IEtub2Nrb3V0T2JzZXJ2YWJsZTxudW1iZXI+O1xuICAgICAgICBzdWJ0aXRsZUxhbmd1YWdlczogS25vY2tvdXRPYnNlcnZhYmxlQXJyYXk8U3RyaW5nSXRlbT47XG4gICAgfVxuXG4gICAgZXhwb3J0IHZhciBjbGllbnRWaWV3TW9kZWw6IElDbGllbnRWaWV3TW9kZWwgPSB7XG4gICAgICAgIHdhbXNFbmNvZGluZ1ByZXNldHM6IGtvLm9ic2VydmFibGVBcnJheTxFbmNvZGluZ1ByZXNldD4oKSxcbiAgICAgICAgZGVmYXVsdFdhbXNFbmNvZGluZ1ByZXNldEluZGV4OiBrby5vYnNlcnZhYmxlPG51bWJlcj4oKSxcbiAgICAgICAgc3VidGl0bGVMYW5ndWFnZXM6IGtvLm9ic2VydmFibGVBcnJheTxTdHJpbmdJdGVtPigpXG4gICAgfTtcblxuICAgIGV4cG9ydCBmdW5jdGlvbiBkZWxldGVXYW1zRW5jb2RpbmdQcmVzZXQocHJlc2V0OiBFbmNvZGluZ1ByZXNldCkge1xuICAgICAgICB2YXIgcmVtb3ZlZEluZGV4ID0gY2xpZW50Vmlld01vZGVsLndhbXNFbmNvZGluZ1ByZXNldHMuaW5kZXhPZihwcmVzZXQpO1xuICAgICAgICBjbGllbnRWaWV3TW9kZWwud2Ftc0VuY29kaW5nUHJlc2V0cy5yZW1vdmUocHJlc2V0KTtcbiAgICAgICAgaWYgKHJlbW92ZWRJbmRleCA9PT0gY2xpZW50Vmlld01vZGVsLmRlZmF1bHRXYW1zRW5jb2RpbmdQcmVzZXRJbmRleCgpKVxuICAgICAgICAgICAgY2xpZW50Vmlld01vZGVsLmRlZmF1bHRXYW1zRW5jb2RpbmdQcmVzZXRJbmRleCgwKTtcbiAgICAgICAgZWxzZSBpZiAocmVtb3ZlZEluZGV4IDwgY2xpZW50Vmlld01vZGVsLmRlZmF1bHRXYW1zRW5jb2RpbmdQcmVzZXRJbmRleCgpKVxuICAgICAgICAgICAgY2xpZW50Vmlld01vZGVsLmRlZmF1bHRXYW1zRW5jb2RpbmdQcmVzZXRJbmRleChjbGllbnRWaWV3TW9kZWwuZGVmYXVsdFdhbXNFbmNvZGluZ1ByZXNldEluZGV4KCkgLSAxKTtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gYWRkTmV3V2Ftc0VuY29kaW5nUHJlc2V0KCkge1xuICAgICAgICBjbGllbnRWaWV3TW9kZWwud2Ftc0VuY29kaW5nUHJlc2V0cy5wdXNoKG5ldyBFbmNvZGluZ1ByZXNldChcIlVubmFtZWRcIiwgbnVsbCkpO1xuICAgICAgICAkKFwiI3ByZXNldHMtdGFibGUgdGJvZHk6Zmlyc3Qtb2YtdHlwZSB0cjpsYXN0LW9mLXR5cGUgdGQ6bnRoLWNoaWxkKDIpIGlucHV0XCIpLmZvY3VzKCkuc2VsZWN0KCk7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZVN1YnRpdGxlTGFuZ3VhZ2UobGFuZ3VhZ2VDdWx0dXJlQ29kZTogU3RyaW5nSXRlbSkge1xuICAgICAgICBjbGllbnRWaWV3TW9kZWwuc3VidGl0bGVMYW5ndWFnZXMucmVtb3ZlKGxhbmd1YWdlQ3VsdHVyZUNvZGUpO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBhZGROZXdTdWJ0aXRsZUxhbmd1YWdlKCkge1xuICAgICAgICBjbGllbnRWaWV3TW9kZWwuc3VidGl0bGVMYW5ndWFnZXMucHVzaChuZXcgU3RyaW5nSXRlbShcIlVubmFtZWRcIikpO1xuICAgICAgICAkKFwiI2xhbmd1YWdlcy10YWJsZSB0Ym9keTpmaXJzdC1vZi10eXBlIHRyOmxhc3Qtb2YtdHlwZSB0ZDpudGgtY2hpbGQoMSkgaW5wdXRcIikuZm9jdXMoKS5zZWxlY3QoKTtcbiAgICB9XG5cbiAgICAkKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJC5lYWNoKGluaXRXYW1zRW5jb2RpbmdQcmVzZXRzLCBmdW5jdGlvbiAocHJlc2V0SW5kZXg6IG51bWJlciwgcHJlc2V0OiBhbnkpIHtcbiAgICAgICAgICAgIGNsaWVudFZpZXdNb2RlbC53YW1zRW5jb2RpbmdQcmVzZXRzLnB1c2gobmV3IEVuY29kaW5nUHJlc2V0KHByZXNldC5uYW1lLCBwcmVzZXQuY3VzdG9tWG1sKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNsaWVudFZpZXdNb2RlbC5kZWZhdWx0V2Ftc0VuY29kaW5nUHJlc2V0SW5kZXgoaW5pdERlZmF1bHRXYW1zRW5jb2RpbmdQcmVzZXRJbmRleCk7XG5cbiAgICAgICAgJC5lYWNoKGluaXRTdWJ0aXRsZUxhbmd1YWdlcywgZnVuY3Rpb24gKGxhbmd1YWdlSW5kZXg6IG51bWJlciwgbGFuZ3VhZ2VDdWx0dXJlQ29kZTogc3RyaW5nKSB7XG4gICAgICAgICAgICBjbGllbnRWaWV3TW9kZWwuc3VidGl0bGVMYW5ndWFnZXMucHVzaChuZXcgU3RyaW5nSXRlbShsYW5ndWFnZUN1bHR1cmVDb2RlKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGtvLmFwcGx5QmluZGluZ3MoY2xpZW50Vmlld01vZGVsKTtcblxuICAgICAgICB2YXIgbG9jYWxTdG9yYWdlID0gd2luZG93W1wibG9jYWxTdG9yYWdlXCJdO1xuICAgICAgICAkKFwiI3RhYnNcIikudGFicyh7XG4gICAgICAgICAgICBhY3RpdmF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChsb2NhbFN0b3JhZ2UgJiYgbG9jYWxTdG9yYWdlLnNldEl0ZW0pXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwic2VsZWN0ZWRDbG91ZE1lZGlhU2V0dGluZ3NUYWJcIiwgJChcIiN0YWJzXCIpLnRhYnMoXCJvcHRpb25cIiwgXCJhY3RpdmVcIikpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFjdGl2ZTogbG9jYWxTdG9yYWdlICYmIGxvY2FsU3RvcmFnZS5nZXRJdGVtID8gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJzZWxlY3RlZENsb3VkTWVkaWFTZXR0aW5nc1RhYlwiKSA6IG51bGxcbiAgICAgICAgfSkuc2hvdygpO1xuICAgIH0pO1xufSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
