/*
** NOTE: This file is generated by Gulp and should not be edited directly!
** Any changes made directly to this file will be overwritten next time its asset group is processed by Gulp.
*/

/// <reference path="Typings/jquery.d.ts" />
/// <reference path="Typings/jqueryui.d.ts" />
/// <reference path="Typings/knockout.d.ts" />
var Orchard;
(function (Orchard) {
    var Azure;
    (function (Azure) {
        var MediaServices;
        (function (MediaServices) {
            var Admin;
            (function (Admin) {
                var Settings;
                (function (Settings) {
                    var StringItem = (function () {
                        function StringItem(value) {
                            this.value = ko.observable(value);
                        }
                        return StringItem;
                    })();
                    Settings.StringItem = StringItem;
                    var EncodingPreset = (function () {
                        function EncodingPreset(name, customXml) {
                            this.name = ko.observable(name);
                            this.customXml = ko.observable(customXml);
                            this.isExpanded = ko.observable(false);
                            this.type = ko.computed(function () {
                                var customXml = this.customXml();
                                if (!!customXml && customXml.length > 0)
                                    return "Custom preset";
                                return "Standard preset";
                            }, this);
                        }
                        EncodingPreset.prototype.toggle = function () {
                            this.isExpanded(!this.isExpanded());
                        };
                        return EncodingPreset;
                    })();
                    Settings.EncodingPreset = EncodingPreset;
                    Settings.clientViewModel = {
                        wamsEncodingPresets: ko.observableArray(),
                        defaultWamsEncodingPresetIndex: ko.observable(),
                        subtitleLanguages: ko.observableArray()
                    };
                    function deleteWamsEncodingPreset(preset) {
                        var removedIndex = Settings.clientViewModel.wamsEncodingPresets.indexOf(preset);
                        Settings.clientViewModel.wamsEncodingPresets.remove(preset);
                        if (removedIndex === Settings.clientViewModel.defaultWamsEncodingPresetIndex())
                            Settings.clientViewModel.defaultWamsEncodingPresetIndex(0);
                        else if (removedIndex < Settings.clientViewModel.defaultWamsEncodingPresetIndex())
                            Settings.clientViewModel.defaultWamsEncodingPresetIndex(Settings.clientViewModel.defaultWamsEncodingPresetIndex() - 1);
                    }
                    Settings.deleteWamsEncodingPreset = deleteWamsEncodingPreset;
                    function addNewWamsEncodingPreset() {
                        Settings.clientViewModel.wamsEncodingPresets.push(new EncodingPreset("Unnamed", null));
                        $("#presets-table tbody:first-of-type tr:last-of-type td:nth-child(2) input").focus().select();
                    }
                    Settings.addNewWamsEncodingPreset = addNewWamsEncodingPreset;
                    function deleteSubtitleLanguage(languageCultureCode) {
                        Settings.clientViewModel.subtitleLanguages.remove(languageCultureCode);
                    }
                    Settings.deleteSubtitleLanguage = deleteSubtitleLanguage;
                    function addNewSubtitleLanguage() {
                        Settings.clientViewModel.subtitleLanguages.push(new StringItem("Unnamed"));
                        $("#languages-table tbody:first-of-type tr:last-of-type td:nth-child(1) input").focus().select();
                    }
                    Settings.addNewSubtitleLanguage = addNewSubtitleLanguage;
                    $(function () {
                        $.each(initWamsEncodingPresets, function (presetIndex, preset) {
                            Settings.clientViewModel.wamsEncodingPresets.push(new EncodingPreset(preset.name, preset.customXml));
                        });
                        Settings.clientViewModel.defaultWamsEncodingPresetIndex(initDefaultWamsEncodingPresetIndex);
                        $.each(initSubtitleLanguages, function (languageIndex, languageCultureCode) {
                            Settings.clientViewModel.subtitleLanguages.push(new StringItem(languageCultureCode));
                        });
                        ko.applyBindings(Settings.clientViewModel);
                        var localStorage = window["localStorage"];
                        $("#tabs").tabs({
                            activate: function () {
                                if (localStorage && localStorage.setItem)
                                    localStorage.setItem("selectedCloudMediaSettingsTab", $("#tabs").tabs("option", "active"));
                            },
                            active: localStorage && localStorage.getItem ? localStorage.getItem("selectedCloudMediaSettingsTab") : null
                        }).show();
                    });
                })(Settings = Admin.Settings || (Admin.Settings = {}));
            })(Admin = MediaServices.Admin || (MediaServices.Admin = {}));
        })(MediaServices = Azure.MediaServices || (Azure.MediaServices = {}));
    })(Azure = Orchard.Azure || (Orchard.Azure = {}));
})(Orchard || (Orchard = {}));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNsb3VkbWVkaWEtYWRtaW4tc2V0dGluZ3MuanMiLCJjbG91ZG1lZGlhLWFkbWluLXNldHRpbmdzLnRzIl0sIm5hbWVzIjpbIk9yY2hhcmQiLCJPcmNoYXJkLkF6dXJlIiwiT3JjaGFyZC5BenVyZS5NZWRpYVNlcnZpY2VzIiwiT3JjaGFyZC5BenVyZS5NZWRpYVNlcnZpY2VzLkFkbWluIiwiT3JjaGFyZC5BenVyZS5NZWRpYVNlcnZpY2VzLkFkbWluLlNldHRpbmdzIiwiT3JjaGFyZC5BenVyZS5NZWRpYVNlcnZpY2VzLkFkbWluLlNldHRpbmdzLlN0cmluZ0l0ZW0iLCJPcmNoYXJkLkF6dXJlLk1lZGlhU2VydmljZXMuQWRtaW4uU2V0dGluZ3MuU3RyaW5nSXRlbS5jb25zdHJ1Y3RvciIsIk9yY2hhcmQuQXp1cmUuTWVkaWFTZXJ2aWNlcy5BZG1pbi5TZXR0aW5ncy5FbmNvZGluZ1ByZXNldCIsIk9yY2hhcmQuQXp1cmUuTWVkaWFTZXJ2aWNlcy5BZG1pbi5TZXR0aW5ncy5FbmNvZGluZ1ByZXNldC5jb25zdHJ1Y3RvciIsIk9yY2hhcmQuQXp1cmUuTWVkaWFTZXJ2aWNlcy5BZG1pbi5TZXR0aW5ncy5FbmNvZGluZ1ByZXNldC50b2dnbGUiLCJPcmNoYXJkLkF6dXJlLk1lZGlhU2VydmljZXMuQWRtaW4uU2V0dGluZ3MuZGVsZXRlV2Ftc0VuY29kaW5nUHJlc2V0IiwiT3JjaGFyZC5BenVyZS5NZWRpYVNlcnZpY2VzLkFkbWluLlNldHRpbmdzLmFkZE5ld1dhbXNFbmNvZGluZ1ByZXNldCIsIk9yY2hhcmQuQXp1cmUuTWVkaWFTZXJ2aWNlcy5BZG1pbi5TZXR0aW5ncy5kZWxldGVTdWJ0aXRsZUxhbmd1YWdlIiwiT3JjaGFyZC5BenVyZS5NZWRpYVNlcnZpY2VzLkFkbWluLlNldHRpbmdzLmFkZE5ld1N1YnRpdGxlTGFuZ3VhZ2UiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxBQ0xBLDRDQUE0QztBQUM1Qyw4Q0FBOEM7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dCI6W251bGwsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJUeXBpbmdzL2pxdWVyeS5kLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlR5cGluZ3MvanF1ZXJ5dWkuZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJUeXBpbmdzL2tub2Nrb3V0LmQudHNcIiAvPlxyXG5cclxuZGVjbGFyZSB2YXIgaW5pdFdhbXNFbmNvZGluZ1ByZXNldHM6IGFueVtdO1xyXG5kZWNsYXJlIHZhciBpbml0RGVmYXVsdFdhbXNFbmNvZGluZ1ByZXNldEluZGV4OiBudW1iZXI7XHJcbmRlY2xhcmUgdmFyIGluaXRTdWJ0aXRsZUxhbmd1YWdlczogc3RyaW5nW107XHJcblxyXG5tb2R1bGUgT3JjaGFyZC5BenVyZS5NZWRpYVNlcnZpY2VzLkFkbWluLlNldHRpbmdzIHtcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgU3RyaW5nSXRlbSB7XHJcbiAgICAgICAgY29uc3RydWN0b3IodmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0ga28ub2JzZXJ2YWJsZSh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmFsdWU6IEtub2Nrb3V0T2JzZXJ2YWJsZTxzdHJpbmc+O1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBFbmNvZGluZ1ByZXNldCB7XHJcbiAgICAgICAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCBjdXN0b21YbWw6IHN0cmluZykge1xyXG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBrby5vYnNlcnZhYmxlKG5hbWUpO1xyXG4gICAgICAgICAgICB0aGlzLmN1c3RvbVhtbCA9IGtvLm9ic2VydmFibGUoY3VzdG9tWG1sKTtcclxuICAgICAgICAgICAgdGhpcy5pc0V4cGFuZGVkID0ga28ub2JzZXJ2YWJsZShmYWxzZSk7XHJcbiAgICAgICAgICAgIHRoaXMudHlwZSA9IGtvLmNvbXB1dGVkKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjdXN0b21YbWw6IHN0cmluZyA9IHRoaXMuY3VzdG9tWG1sKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoISFjdXN0b21YbWwgJiYgY3VzdG9tWG1sLmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiQ3VzdG9tIHByZXNldFwiO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiU3RhbmRhcmQgcHJlc2V0XCI7XHJcbiAgICAgICAgICAgIH0sIHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG5hbWU6IEtub2Nrb3V0T2JzZXJ2YWJsZTxzdHJpbmc+O1xyXG4gICAgICAgIHB1YmxpYyBjdXN0b21YbWw6IEtub2Nrb3V0T2JzZXJ2YWJsZTxzdHJpbmc+O1xyXG4gICAgICAgIHB1YmxpYyBpc0V4cGFuZGVkOiBLbm9ja291dE9ic2VydmFibGU8Ym9vbGVhbj47XHJcbiAgICAgICAgcHVibGljIHR5cGU6IEtub2Nrb3V0Q29tcHV0ZWQ8c3RyaW5nPjtcclxuXHJcbiAgICAgICAgcHVibGljIHRvZ2dsZSgpIHtcclxuICAgICAgICAgICAgdGhpcy5pc0V4cGFuZGVkKCF0aGlzLmlzRXhwYW5kZWQoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUNsaWVudFZpZXdNb2RlbCB7XHJcbiAgICAgICAgd2Ftc0VuY29kaW5nUHJlc2V0czogS25vY2tvdXRPYnNlcnZhYmxlQXJyYXk8RW5jb2RpbmdQcmVzZXQ+O1xyXG4gICAgICAgIGRlZmF1bHRXYW1zRW5jb2RpbmdQcmVzZXRJbmRleDogS25vY2tvdXRPYnNlcnZhYmxlPG51bWJlcj47XHJcbiAgICAgICAgc3VidGl0bGVMYW5ndWFnZXM6IEtub2Nrb3V0T2JzZXJ2YWJsZUFycmF5PFN0cmluZ0l0ZW0+O1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCB2YXIgY2xpZW50Vmlld01vZGVsOiBJQ2xpZW50Vmlld01vZGVsID0ge1xyXG4gICAgICAgIHdhbXNFbmNvZGluZ1ByZXNldHM6IGtvLm9ic2VydmFibGVBcnJheTxFbmNvZGluZ1ByZXNldD4oKSxcclxuICAgICAgICBkZWZhdWx0V2Ftc0VuY29kaW5nUHJlc2V0SW5kZXg6IGtvLm9ic2VydmFibGU8bnVtYmVyPigpLFxyXG4gICAgICAgIHN1YnRpdGxlTGFuZ3VhZ2VzOiBrby5vYnNlcnZhYmxlQXJyYXk8U3RyaW5nSXRlbT4oKVxyXG4gICAgfTtcclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gZGVsZXRlV2Ftc0VuY29kaW5nUHJlc2V0KHByZXNldDogRW5jb2RpbmdQcmVzZXQpIHtcclxuICAgICAgICB2YXIgcmVtb3ZlZEluZGV4ID0gY2xpZW50Vmlld01vZGVsLndhbXNFbmNvZGluZ1ByZXNldHMuaW5kZXhPZihwcmVzZXQpO1xyXG4gICAgICAgIGNsaWVudFZpZXdNb2RlbC53YW1zRW5jb2RpbmdQcmVzZXRzLnJlbW92ZShwcmVzZXQpO1xyXG4gICAgICAgIGlmIChyZW1vdmVkSW5kZXggPT09IGNsaWVudFZpZXdNb2RlbC5kZWZhdWx0V2Ftc0VuY29kaW5nUHJlc2V0SW5kZXgoKSlcclxuICAgICAgICAgICAgY2xpZW50Vmlld01vZGVsLmRlZmF1bHRXYW1zRW5jb2RpbmdQcmVzZXRJbmRleCgwKTtcclxuICAgICAgICBlbHNlIGlmIChyZW1vdmVkSW5kZXggPCBjbGllbnRWaWV3TW9kZWwuZGVmYXVsdFdhbXNFbmNvZGluZ1ByZXNldEluZGV4KCkpXHJcbiAgICAgICAgICAgIGNsaWVudFZpZXdNb2RlbC5kZWZhdWx0V2Ftc0VuY29kaW5nUHJlc2V0SW5kZXgoY2xpZW50Vmlld01vZGVsLmRlZmF1bHRXYW1zRW5jb2RpbmdQcmVzZXRJbmRleCgpIC0gMSk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGFkZE5ld1dhbXNFbmNvZGluZ1ByZXNldCgpIHtcclxuICAgICAgICBjbGllbnRWaWV3TW9kZWwud2Ftc0VuY29kaW5nUHJlc2V0cy5wdXNoKG5ldyBFbmNvZGluZ1ByZXNldChcIlVubmFtZWRcIiwgbnVsbCkpO1xyXG4gICAgICAgICQoXCIjcHJlc2V0cy10YWJsZSB0Ym9keTpmaXJzdC1vZi10eXBlIHRyOmxhc3Qtb2YtdHlwZSB0ZDpudGgtY2hpbGQoMikgaW5wdXRcIikuZm9jdXMoKS5zZWxlY3QoKTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gZGVsZXRlU3VidGl0bGVMYW5ndWFnZShsYW5ndWFnZUN1bHR1cmVDb2RlOiBTdHJpbmdJdGVtKSB7XHJcbiAgICAgICAgY2xpZW50Vmlld01vZGVsLnN1YnRpdGxlTGFuZ3VhZ2VzLnJlbW92ZShsYW5ndWFnZUN1bHR1cmVDb2RlKTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gYWRkTmV3U3VidGl0bGVMYW5ndWFnZSgpIHtcclxuICAgICAgICBjbGllbnRWaWV3TW9kZWwuc3VidGl0bGVMYW5ndWFnZXMucHVzaChuZXcgU3RyaW5nSXRlbShcIlVubmFtZWRcIikpO1xyXG4gICAgICAgICQoXCIjbGFuZ3VhZ2VzLXRhYmxlIHRib2R5OmZpcnN0LW9mLXR5cGUgdHI6bGFzdC1vZi10eXBlIHRkOm50aC1jaGlsZCgxKSBpbnB1dFwiKS5mb2N1cygpLnNlbGVjdCgpO1xyXG4gICAgfVxyXG5cclxuICAgICQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQuZWFjaChpbml0V2Ftc0VuY29kaW5nUHJlc2V0cywgZnVuY3Rpb24gKHByZXNldEluZGV4OiBudW1iZXIsIHByZXNldDogYW55KSB7XHJcbiAgICAgICAgICAgIGNsaWVudFZpZXdNb2RlbC53YW1zRW5jb2RpbmdQcmVzZXRzLnB1c2gobmV3IEVuY29kaW5nUHJlc2V0KHByZXNldC5uYW1lLCBwcmVzZXQuY3VzdG9tWG1sKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNsaWVudFZpZXdNb2RlbC5kZWZhdWx0V2Ftc0VuY29kaW5nUHJlc2V0SW5kZXgoaW5pdERlZmF1bHRXYW1zRW5jb2RpbmdQcmVzZXRJbmRleCk7XHJcblxyXG4gICAgICAgICQuZWFjaChpbml0U3VidGl0bGVMYW5ndWFnZXMsIGZ1bmN0aW9uIChsYW5ndWFnZUluZGV4OiBudW1iZXIsIGxhbmd1YWdlQ3VsdHVyZUNvZGU6IHN0cmluZykge1xyXG4gICAgICAgICAgICBjbGllbnRWaWV3TW9kZWwuc3VidGl0bGVMYW5ndWFnZXMucHVzaChuZXcgU3RyaW5nSXRlbShsYW5ndWFnZUN1bHR1cmVDb2RlKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGtvLmFwcGx5QmluZGluZ3MoY2xpZW50Vmlld01vZGVsKTtcclxuXHJcbiAgICAgICAgdmFyIGxvY2FsU3RvcmFnZSA9IHdpbmRvd1tcImxvY2FsU3RvcmFnZVwiXTtcclxuICAgICAgICAkKFwiI3RhYnNcIikudGFicyh7XHJcbiAgICAgICAgICAgIGFjdGl2YXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlICYmIGxvY2FsU3RvcmFnZS5zZXRJdGVtKVxyXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwic2VsZWN0ZWRDbG91ZE1lZGlhU2V0dGluZ3NUYWJcIiwgJChcIiN0YWJzXCIpLnRhYnMoXCJvcHRpb25cIiwgXCJhY3RpdmVcIikpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBhY3RpdmU6IGxvY2FsU3RvcmFnZSAmJiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSA/IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic2VsZWN0ZWRDbG91ZE1lZGlhU2V0dGluZ3NUYWJcIikgOiBudWxsXHJcbiAgICAgICAgfSkuc2hvdygpO1xyXG4gICAgfSk7XHJcbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
