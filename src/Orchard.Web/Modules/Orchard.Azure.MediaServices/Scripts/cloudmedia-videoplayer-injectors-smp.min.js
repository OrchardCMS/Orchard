var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Orchard;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){function t(e){var t=document.getElementById(e);t&&t.addEventListener("mediaPlayerStateChange",'Orchard.Azure.MediaServices.VideoPlayer.Injectors.instances["'+e+'"].onMediaPlayerStateChange')}e.instances=new Array;var n=function(t){function n(e,n,r,i,s,a,o,c,l){var d=t.call(this,e,n,r,i,s,a,o,c)||this;return d.contentBaseUrl=l,d.flashVersion="10.2.0",d.innerElementId=e.id+"-inner",d}return __extends(n,t),n.prototype.isSupported=function(){var e=swfobject.hasFlashPlayerVersion(this.flashVersion),t=_(this.filteredAssets().DynamicVideoAssets).any(),n=e&&t;return this.debug("Browser has required Flash version: {0}",e),this.debug("Item has at least one dynamic video asset: {0}",t),this.debug("isSupported() returns {0}.",n),n},n.prototype.inject=function(){var t=this,n=_(this.filteredAssets().DynamicVideoAssets).first(),r=_(this.filteredAssets().ThumbnailAssets).first(),i={src:n.SmoothStreamingUrl,plugin_AdaptiveStreamingPlugin:encodeURIComponent(this.contentBaseUrl+"MSAdaptiveStreamingPlugin.swf"),AdaptiveStreamingPlugin_retryLive:"true",AdaptiveStreamingPlugin_retryInterval:"10",autoPlay:this.autoPlay.toString(),bufferingOverlay:"false",poster:r?encodeURIComponent(r.MainFileUrl):null,javascriptCallbackFunction:"Orchard.Azure.MediaServices.VideoPlayer.Injectors.onSmpBridgeCreated"},s={allowFullScreen:"true",allowScriptAccess:"always",wmode:"direct"},a={id:this.innerElementId};$("<div>").attr("id",this.innerElementId).appendTo(this.container),this.debug("Injecting player into element '{0}'.",this.container.id),swfobject.embedSWF(this.contentBaseUrl+"StrobeMediaPlayback.swf",this.innerElementId,this.playerWidth.toString(),this.playerHeight.toString(),this.flashVersion,this.contentBaseUrl+"expressInstall.swf",i,s,a,function(e){e.success||t.fault()}),e.instances[this.innerElementId]=this},n.prototype.onMediaPlayerStateChange=function(t){"playbackError"==t&&(this.debug("Playback error detected; cleaning up container and faulting this injector."),e.instances[this.innerElementId]=null,this.fault())},n.prototype.debug=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];t.prototype.debug.call(this,"SmpInjector: "+e,n)},n}(e.Injector);e.SmpInjector=n,e.onSmpBridgeCreated=t}(t=e.Injectors||(e.Injectors={}))}(t=e.VideoPlayer||(e.VideoPlayer={}))}(t=e.MediaServices||(e.MediaServices={}))}(t=e.Azure||(e.Azure={}))}(Orchard||(Orchard={}));
