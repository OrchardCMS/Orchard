/*
** NOTE: This file is generated by Gulp and should not be edited directly!
** Any changes made directly to this file will be overwritten next time its asset group is processed by Gulp.
*/

typeof JSON != "object" && (JSON = {}), function () { "use strict"; function f(e) { return e < 10 ? "0" + e : e } function quote(e) { return escapable.lastIndex = 0, escapable.test(e) ? '"' + e.replace(escapable, function (e) { var t = meta[e]; return typeof t == "string" ? t : "\\u" + ("0000" + e.charCodeAt(0).toString(16)).slice(-4) }) + '"' : '"' + e + '"' } function str(e, t) { var n, r, i, s, o = gap, u, a = t[e]; a && typeof a == "object" && typeof a.toJSON == "function" && (a = a.toJSON(e)), typeof rep == "function" && (a = rep.call(t, e, a)); switch (typeof a) { case "string": return quote(a); case "number": return isFinite(a) ? String(a) : "null"; case "boolean": case "null": return String(a); case "object": if (!a) return "null"; gap += indent, u = []; if (Object.prototype.toString.apply(a) === "[object Array]") { s = a.length; for (n = 0; n < s; n += 1) u[n] = str(n, a) || "null"; return i = u.length === 0 ? "[]" : gap ? "[\n" + gap + u.join(",\n" + gap) + "\n" + o + "]" : "[" + u.join(",") + "]", gap = o, i } if (rep && typeof rep == "object") { s = rep.length; for (n = 0; n < s; n += 1) typeof rep[n] == "string" && (r = rep[n], i = str(r, a), i && u.push(quote(r) + (gap ? ": " : ":") + i)) } else for (r in a) Object.prototype.hasOwnProperty.call(a, r) && (i = str(r, a), i && u.push(quote(r) + (gap ? ": " : ":") + i)); return i = u.length === 0 ? "{}" : gap ? "{\n" + gap + u.join(",\n" + gap) + "\n" + o + "}" : "{" + u.join(",") + "}", gap = o, i } } typeof Date.prototype.toJSON != "function" && (Date.prototype.toJSON = function (e) { return isFinite(this.valueOf()) ? this.getUTCFullYear() + "-" + f(this.getUTCMonth() + 1) + "-" + f(this.getUTCDate()) + "T" + f(this.getUTCHours()) + ":" + f(this.getUTCMinutes()) + ":" + f(this.getUTCSeconds()) + "Z" : null }, String.prototype.toJSON = Number.prototype.toJSON = Boolean.prototype.toJSON = function (e) { return this.valueOf() }); var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, gap, indent, meta = { "\b": "\\b", "	": "\\t", "\n": "\\n", "\f": "\\f", "\r": "\\r", '"': '\\"', "\\": "\\\\" }, rep; typeof JSON.stringify != "function" && (JSON.stringify = function (e, t, n) { var r; gap = "", indent = ""; if (typeof n == "number") for (r = 0; r < n; r += 1) indent += " "; else typeof n == "string" && (indent = n); rep = t; if (!t || typeof t == "function" || typeof t == "object" && typeof t.length == "number") return str("", { "": e }); throw new Error("JSON.stringify") }), typeof JSON.parse != "function" && (JSON.parse = function (text, reviver) { function walk(e, t) { var n, r, i = e[t]; if (i && typeof i == "object") for (n in i) Object.prototype.hasOwnProperty.call(i, n) && (r = walk(i, n), r !== undefined ? i[n] = r : delete i[n]); return reviver.call(e, t, i) } var j; text = String(text), cx.lastIndex = 0, cx.test(text) && (text = text.replace(cx, function (e) { return "\\u" + ("0000" + e.charCodeAt(0).toString(16)).slice(-4) })); if (/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, ""))) return j = eval("(" + text + ")"), typeof reviver == "function" ? walk({ "": j }, "") : j; throw new SyntaxError("JSON.parse") }) }(), function (e, t) { "use strict"; var n = e.History = e.History || {}; if (typeof n.Adapter != "undefined") throw new Error("History.js Adapter has already been loaded..."); n.Adapter = { handlers: {}, _uid: 1, uid: function (e) { return e._uid || (e._uid = n.Adapter._uid++) }, bind: function (e, t, r) { var i = n.Adapter.uid(e); n.Adapter.handlers[i] = n.Adapter.handlers[i] || {}, n.Adapter.handlers[i][t] = n.Adapter.handlers[i][t] || [], n.Adapter.handlers[i][t].push(r), e["on" + t] = function (e, t) { return function (r) { n.Adapter.trigger(e, t, r) } }(e, t) }, trigger: function (e, t, r) { r = r || {}; var i = n.Adapter.uid(e), s, o; n.Adapter.handlers[i] = n.Adapter.handlers[i] || {}, n.Adapter.handlers[i][t] = n.Adapter.handlers[i][t] || []; for (s = 0, o = n.Adapter.handlers[i][t].length; s < o; ++s) n.Adapter.handlers[i][t][s].apply(this, [r]) }, extractEventData: function (e, n) { var r = n && n[e] || t; return r }, onDomLoad: function (t) { var n = e.setTimeout(function () { t() }, 2e3); e.onload = function () { clearTimeout(n), t() } } }, typeof n.init != "undefined" && n.init() }(window), function (e, t) { "use strict"; var n = e.document, r = e.setTimeout || r, i = e.clearTimeout || i, s = e.setInterval || s, o = e.History = e.History || {}; if (typeof o.initHtml4 != "undefined") throw new Error("History.js HTML4 Support has already been loaded..."); o.initHtml4 = function () { if (typeof o.initHtml4.initialized != "undefined") return !1; o.initHtml4.initialized = !0, o.enabled = !0, o.savedHashes = [], o.isLastHash = function (e) { var t = o.getHashByIndex(), n; return n = e === t, n }, o.isHashEqual = function (e, t) { return e = encodeURIComponent(e).replace(/%25/g, "%"), t = encodeURIComponent(t).replace(/%25/g, "%"), e === t }, o.saveHash = function (e) { return o.isLastHash(e) ? !1 : (o.savedHashes.push(e), !0) }, o.getHashByIndex = function (e) { var t = null; return typeof e == "undefined" ? t = o.savedHashes[o.savedHashes.length - 1] : e < 0 ? t = o.savedHashes[o.savedHashes.length + e] : t = o.savedHashes[e], t }, o.discardedHashes = {}, o.discardedStates = {}, o.discardState = function (e, t, n) { var r = o.getHashByState(e), i; return i = { discardedState: e, backState: n, forwardState: t }, o.discardedStates[r] = i, !0 }, o.discardHash = function (e, t, n) { var r = { discardedHash: e, backState: n, forwardState: t }; return o.discardedHashes[e] = r, !0 }, o.discardedState = function (e) { var t = o.getHashByState(e), n; return n = o.discardedStates[t] || !1, n }, o.discardedHash = function (e) { var t = o.discardedHashes[e] || !1; return t }, o.recycleState = function (e) { var t = o.getHashByState(e); return o.discardedState(e) && delete o.discardedStates[t], !0 }, o.emulated.hashChange && (o.hashChangeInit = function () { o.checkerFunction = null; var t = "", r, i, u, a, f = Boolean(o.getHash()); return o.isInternetExplorer() ? (r = "historyjs-iframe", i = n.createElement("iframe"), i.setAttribute("id", r), i.setAttribute("src", "#"), i.style.display = "none", n.body.appendChild(i), i.contentWindow.document.open(), i.contentWindow.document.close(), u = "", a = !1, o.checkerFunction = function () { if (a) return !1; a = !0; var n = o.getHash(), r = o.getHash(i.contentWindow.document); return n !== t ? (t = n, r !== n && (u = r = n, i.contentWindow.document.open(), i.contentWindow.document.close(), i.contentWindow.document.location.hash = o.escapeHash(n)), o.Adapter.trigger(e, "hashchange")) : r !== u && (u = r, f && r === "" ? o.back() : o.setHash(r, !1)), a = !1, !0 }) : o.checkerFunction = function () { var n = o.getHash() || ""; return n !== t && (t = n, o.Adapter.trigger(e, "hashchange")), !0 }, o.intervalList.push(s(o.checkerFunction, o.options.hashChangeInterval)), !0 }, o.Adapter.onDomLoad(o.hashChangeInit)), o.emulated.pushState && (o.onHashChange = function (t) { var n = t && t.newURL || o.getLocationHref(), r = o.getHashByUrl(n), i = null, s = null, u = null, a; return o.isLastHash(r) ? (o.busy(!1), !1) : (o.doubleCheckComplete(), o.saveHash(r), r && o.isTraditionalAnchor(r) ? (o.Adapter.trigger(e, "anchorchange"), o.busy(!1), !1) : (i = o.extractState(o.getFullUrl(r || o.getLocationHref()), !0), o.isLastSavedState(i) ? (o.busy(!1), !1) : (s = o.getHashByState(i), a = o.discardedState(i), a ? (o.getHashByIndex(-2) === o.getHashByState(a.forwardState) ? o.back(!1) : o.forward(!1), !1) : (o.pushState(i.data, i.title, encodeURI(i.url), !1), !0)))) }, o.Adapter.bind(e, "hashchange", o.onHashChange), o.pushState = function (t, n, r, i) { r = encodeURI(r).replace(/%25/g, "%"); if (o.getHashByUrl(r)) throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors)."); if (i !== !1 && o.busy()) return o.pushQueue({ scope: o, callback: o.pushState, args: arguments, queue: i }), !1; o.busy(!0); var s = o.createStateObject(t, n, r), u = o.getHashByState(s), a = o.getState(!1), f = o.getHashByState(a), l = o.getHash(), c = o.expectedStateId == s.id; return o.storeState(s), o.expectedStateId = s.id, o.recycleState(s), o.setTitle(s), u === f ? (o.busy(!1), !1) : (o.saveState(s), c || o.Adapter.trigger(e, "statechange"), !o.isHashEqual(u, l) && !o.isHashEqual(u, o.getShortUrl(o.getLocationHref())) && o.setHash(u, !1), o.busy(!1), !0) }, o.replaceState = function (t, n, r, i) { r = encodeURI(r).replace(/%25/g, "%"); if (o.getHashByUrl(r)) throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors)."); if (i !== !1 && o.busy()) return o.pushQueue({ scope: o, callback: o.replaceState, args: arguments, queue: i }), !1; o.busy(!0); var s = o.createStateObject(t, n, r), u = o.getHashByState(s), a = o.getState(!1), f = o.getHashByState(a), l = o.getStateByIndex(-2); return o.discardState(a, s, l), u === f ? (o.storeState(s), o.expectedStateId = s.id, o.recycleState(s), o.setTitle(s), o.saveState(s), o.Adapter.trigger(e, "statechange"), o.busy(!1)) : o.pushState(s.data, s.title, s.url, !1), !0 }), o.emulated.pushState && o.getHash() && !o.emulated.hashChange && o.Adapter.onDomLoad(function () { o.Adapter.trigger(e, "hashchange") }) }, typeof o.init != "undefined" && o.init() }(window), function (e, t) { "use strict"; var n = e.console || t, r = e.document, i = e.navigator, s = e.sessionStorage || !1, o = e.setTimeout, u = e.clearTimeout, a = e.setInterval, f = e.clearInterval, l = e.JSON, c = e.alert, h = e.History = e.History || {}, p = e.history; try { s.setItem("TEST", "1"), s.removeItem("TEST") } catch (d) { s = !1 } l.stringify = l.stringify || l.encode, l.parse = l.parse || l.decode; if (typeof h.init != "undefined") throw new Error("History.js Core has already been loaded..."); h.init = function (e) { return typeof h.Adapter == "undefined" ? !1 : (typeof h.initCore != "undefined" && h.initCore(), typeof h.initHtml4 != "undefined" && h.initHtml4(), !0) }, h.initCore = function (d) { if (typeof h.initCore.initialized != "undefined") return !1; h.initCore.initialized = !0, h.options = h.options || {}, h.options.hashChangeInterval = h.options.hashChangeInterval || 100, h.options.safariPollInterval = h.options.safariPollInterval || 500, h.options.doubleCheckInterval = h.options.doubleCheckInterval || 500, h.options.disableSuid = h.options.disableSuid || !1, h.options.storeInterval = h.options.storeInterval || 1e3, h.options.busyDelay = h.options.busyDelay || 250, h.options.debug = h.options.debug || !1, h.options.initialTitle = h.options.initialTitle || r.title, h.options.html4Mode = h.options.html4Mode || !1, h.options.delayInit = h.options.delayInit || !1, h.intervalList = [], h.clearAllIntervals = function () { var e, t = h.intervalList; if (typeof t != "undefined" && t !== null) { for (e = 0; e < t.length; e++) f(t[e]); h.intervalList = null } }, h.debug = function () { (h.options.debug || !1) && h.log.apply(h, arguments) }, h.log = function () { var e = typeof n != "undefined" && typeof n.log != "undefined" && typeof n.log.apply != "undefined", t = r.getElementById("log"), i, s, o, u, a; e ? (u = Array.prototype.slice.call(arguments), i = u.shift(), typeof n.debug != "undefined" ? n.debug.apply(n, [i, u]) : n.log.apply(n, [i, u])) : i = "\n" + arguments[0] + "\n"; for (s = 1, o = arguments.length; s < o; ++s) { a = arguments[s]; if (typeof a == "object" && typeof l != "undefined") try { a = l.stringify(a) } catch (f) { } i += "\n" + a + "\n" } return t ? (t.value += i + "\n-----\n", t.scrollTop = t.scrollHeight - t.clientHeight) : e || c(i), !0 }, h.getInternetExplorerMajorVersion = function () { var e = h.getInternetExplorerMajorVersion.cached = typeof h.getInternetExplorerMajorVersion.cached != "undefined" ? h.getInternetExplorerMajorVersion.cached : function () { var e = 3, t = r.createElement("div"), n = t.getElementsByTagName("i"); while ((t.innerHTML = "<!--[if gt IE " + ++e + "]><i></i><![endif]-->") && n[0]); return e > 4 ? e : !1 }(); return e }, h.isInternetExplorer = function () { var e = h.isInternetExplorer.cached = typeof h.isInternetExplorer.cached != "undefined" ? h.isInternetExplorer.cached : Boolean(h.getInternetExplorerMajorVersion()); return e }, h.options.html4Mode ? h.emulated = { pushState: !0, hashChange: !0 } : h.emulated = { pushState: !Boolean(e.history && e.history.pushState && e.history.replaceState && !/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(i.userAgent) && !/AppleWebKit\/5([0-2]|3[0-2])/i.test(i.userAgent)), hashChange: Boolean(!("onhashchange" in e || "onhashchange" in r) || h.isInternetExplorer() && h.getInternetExplorerMajorVersion() < 8) }, h.enabled = !h.emulated.pushState, h.bugs = { setHash: Boolean(!h.emulated.pushState && i.vendor === "Apple Computer, Inc." && /AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)), safariPoll: Boolean(!h.emulated.pushState && i.vendor === "Apple Computer, Inc." && /AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)), ieDoubleCheck: Boolean(h.isInternetExplorer() && h.getInternetExplorerMajorVersion() < 8), hashEscape: Boolean(h.isInternetExplorer() && h.getInternetExplorerMajorVersion() < 7) }, h.isEmptyObject = function (e) { for (var t in e) if (e.hasOwnProperty(t)) return !1; return !0 }, h.cloneObject = function (e) { var t, n; return e ? (t = l.stringify(e), n = l.parse(t)) : n = {}, n }, h.getRootUrl = function () { var e = r.location.protocol + "//" + (r.location.hostname || r.location.host); if (r.location.port || !1) e += ":" + r.location.port; return e += "/", e }, h.getBaseHref = function () { var e = r.getElementsByTagName("base"), t = null, n = ""; return e.length === 1 && (t = e[0], n = t.href.replace(/[^\/]+$/, "")), n = n.replace(/\/+$/, ""), n && (n += "/"), n }, h.getBaseUrl = function () { var e = h.getBaseHref() || h.getBasePageUrl() || h.getRootUrl(); return e }, h.getPageUrl = function () { var e = h.getState(!1, !1), t = (e || {}).url || h.getLocationHref(), n; return n = t.replace(/\/+$/, "").replace(/[^\/]+$/, function (e, t, n) { return /\./.test(e) ? e : e + "/" }), n }, h.getBasePageUrl = function () { var e = h.getLocationHref().replace(/[#\?].*/, "").replace(/[^\/]+$/, function (e, t, n) { return /[^\/]$/.test(e) ? "" : e }).replace(/\/+$/, "") + "/"; return e }, h.getFullUrl = function (e, t) { var n = e, r = e.substring(0, 1); return t = typeof t == "undefined" ? !0 : t, /[a-z]+\:\/\//.test(e) || (r === "/" ? n = h.getRootUrl() + e.replace(/^\/+/, "") : r === "#" ? n = h.getPageUrl().replace(/#.*/, "") + e : r === "?" ? n = h.getPageUrl().replace(/[\?#].*/, "") + e : t ? n = h.getBaseUrl() + e.replace(/^(\.\/)+/, "") : n = h.getBasePageUrl() + e.replace(/^(\.\/)+/, "")), n.replace(/\#$/, "") }, h.getShortUrl = function (e) { var t = e, n = h.getBaseUrl(), r = h.getRootUrl(); return h.emulated.pushState && (t = t.replace(n, "")), t = t.replace(r, "/"), h.isTraditionalAnchor(t) && (t = "./" + t), t = t.replace(/^(\.\/)+/g, "./").replace(/\#$/, ""), t }, h.getLocationHref = function (e) { return e = e || r, e.URL === e.location.href ? e.location.href : e.location.href === decodeURIComponent(e.URL) ? e.URL : e.location.hash && decodeURIComponent(e.location.href.replace(/^[^#]+/, "")) === e.location.hash ? e.location.href : e.URL.indexOf("#") == -1 && e.location.href.indexOf("#") != -1 ? e.location.href : e.URL || e.location.href }, h.store = {}, h.idToState = h.idToState || {}, h.stateToId = h.stateToId || {}, h.urlToId = h.urlToId || {}, h.storedStates = h.storedStates || [], h.savedStates = h.savedStates || [], h.normalizeStore = function () { h.store.idToState = h.store.idToState || {}, h.store.urlToId = h.store.urlToId || {}, h.store.stateToId = h.store.stateToId || {} }, h.getState = function (e, t) { typeof e == "undefined" && (e = !0), typeof t == "undefined" && (t = !0); var n = h.getLastSavedState(); return !n && t && (n = h.createStateObject()), e && (n = h.cloneObject(n), n.url = n.cleanUrl || n.url), n }, h.getIdByState = function (e) { var t = h.extractId(e.url), n; if (!t) { n = h.getStateString(e); if (typeof h.stateToId[n] != "undefined") t = h.stateToId[n]; else if (typeof h.store.stateToId[n] != "undefined") t = h.store.stateToId[n]; else { for (; ;) { t = (new Date).getTime() + String(Math.random()).replace(/\D/g, ""); if (typeof h.idToState[t] == "undefined" && typeof h.store.idToState[t] == "undefined") break } h.stateToId[n] = t, h.idToState[t] = e } } return t }, h.normalizeState = function (e) { var t, n; if (!e || typeof e != "object") e = {}; if (typeof e.normalized != "undefined") return e; if (!e.data || typeof e.data != "object") e.data = {}; return t = {}, t.normalized = !0, t.title = e.title || "", t.url = h.getFullUrl(e.url ? e.url : h.getLocationHref()), t.hash = h.getShortUrl(t.url), t.data = h.cloneObject(e.data), t.id = h.getIdByState(t), t.cleanUrl = t.url.replace(/\??\&_suid.*/, ""), t.url = t.cleanUrl, n = !h.isEmptyObject(t.data), (t.title || n) && h.options.disableSuid !== !0 && (t.hash = h.getShortUrl(t.url).replace(/\??\&_suid.*/, ""), /\?/.test(t.hash) || (t.hash += "?"), t.hash += "&_suid=" + t.id), t.hashedUrl = h.getFullUrl(t.hash), (h.emulated.pushState || h.bugs.safariPoll) && h.hasUrlDuplicate(t) && (t.url = t.hashedUrl), t }, h.createStateObject = function (e, t, n) { var r = { data: e, title: t, url: n }; return r = h.normalizeState(r), r }, h.getStateById = function (e) { e = String(e); var n = h.idToState[e] || h.store.idToState[e] || t; return n }, h.getStateString = function (e) { var t, n, r; return t = h.normalizeState(e), n = { data: t.data, title: e.title, url: e.url }, r = l.stringify(n), r }, h.getStateId = function (e) { var t, n; return t = h.normalizeState(e), n = t.id, n }, h.getHashByState = function (e) { var t, n; return t = h.normalizeState(e), n = t.hash, n }, h.extractId = function (e) { var t, n, r, i; return e.indexOf("#") != -1 ? i = e.split("#")[0] : i = e, n = /(.*)\&_suid=([0-9]+)$/.exec(i), r = n ? n[1] || e : e, t = n ? String(n[2] || "") : "", t || !1 }, h.isTraditionalAnchor = function (e) { var t = !/[\/\?\.]/.test(e); return t }, h.extractState = function (e, t) { var n = null, r, i; return t = t || !1, r = h.extractId(e), r && (n = h.getStateById(r)), n || (i = h.getFullUrl(e), r = h.getIdByUrl(i) || !1, r && (n = h.getStateById(r)), !n && t && !h.isTraditionalAnchor(e) && (n = h.createStateObject(null, null, i))), n }, h.getIdByUrl = function (e) { var n = h.urlToId[e] || h.store.urlToId[e] || t; return n }, h.getLastSavedState = function () { return h.savedStates[h.savedStates.length - 1] || t }, h.getLastStoredState = function () { return h.storedStates[h.storedStates.length - 1] || t }, h.hasUrlDuplicate = function (e) { var t = !1, n; return n = h.extractState(e.url), t = n && n.id !== e.id, t }, h.storeState = function (e) { return h.urlToId[e.url] = e.id, h.storedStates.push(h.cloneObject(e)), e }, h.isLastSavedState = function (e) { var t = !1, n, r, i; return h.savedStates.length && (n = e.id, r = h.getLastSavedState(), i = r.id, t = n === i), t }, h.saveState = function (e) { return h.isLastSavedState(e) ? !1 : (h.savedStates.push(h.cloneObject(e)), !0) }, h.getStateByIndex = function (e) { var t = null; return typeof e == "undefined" ? t = h.savedStates[h.savedStates.length - 1] : e < 0 ? t = h.savedStates[h.savedStates.length + e] : t = h.savedStates[e], t }, h.getCurrentIndex = function () { var e = null; return h.savedStates.length < 1 ? e = 0 : e = h.savedStates.length - 1, e }, h.getHash = function (e) { var t = h.getLocationHref(e), n; return n = h.getHashByUrl(t), n }, h.unescapeHash = function (e) { var t = h.normalizeHash(e); return t = decodeURIComponent(t), t }, h.normalizeHash = function (e) { var t = e.replace(/[^#]*#/, "").replace(/#.*/, ""); return t }, h.setHash = function (e, t) { var n, i; return t !== !1 && h.busy() ? (h.pushQueue({ scope: h, callback: h.setHash, args: arguments, queue: t }), !1) : (h.busy(!0), n = h.extractState(e, !0), n && !h.emulated.pushState ? h.pushState(n.data, n.title, n.url, !1) : h.getHash() !== e && (h.bugs.setHash ? (i = h.getPageUrl(), h.pushState(null, null, i + "#" + e, !1)) : r.location.hash = e), h) }, h.escapeHash = function (t) { var n = h.normalizeHash(t); return n = e.encodeURIComponent(n), h.bugs.hashEscape || (n = n.replace(/\%21/g, "!").replace(/\%26/g, "&").replace(/\%3D/g, "=").replace(/\%3F/g, "?")), n }, h.getHashByUrl = function (e) { var t = String(e).replace(/([^#]*)#?([^#]*)#?(.*)/, "$2"); return t = h.unescapeHash(t), t }, h.setTitle = function (e) { var t = e.title, n; t || (n = h.getStateByIndex(0), n && n.url === e.url && (t = n.title || h.options.initialTitle)); try { r.getElementsByTagName("title")[0].innerHTML = t.replace("<", "&lt;").replace(">", "&gt;").replace(" & ", " &amp; ") } catch (i) { } return r.title = t, h }, h.queues = [], h.busy = function (e) { typeof e != "undefined" ? h.busy.flag = e : typeof h.busy.flag == "undefined" && (h.busy.flag = !1); if (!h.busy.flag) { u(h.busy.timeout); var t = function () { var e, n, r; if (h.busy.flag) return; for (e = h.queues.length - 1; e >= 0; --e) { n = h.queues[e]; if (n.length === 0) continue; r = n.shift(), h.fireQueueItem(r), h.busy.timeout = o(t, h.options.busyDelay) } }; h.busy.timeout = o(t, h.options.busyDelay) } return h.busy.flag }, h.busy.flag = !1, h.fireQueueItem = function (e) { return e.callback.apply(e.scope || h, e.args || []) }, h.pushQueue = function (e) { return h.queues[e.queue || 0] = h.queues[e.queue || 0] || [], h.queues[e.queue || 0].push(e), h }, h.queue = function (e, t) { return typeof e == "function" && (e = { callback: e }), typeof t != "undefined" && (e.queue = t), h.busy() ? h.pushQueue(e) : h.fireQueueItem(e), h }, h.clearQueue = function () { return h.busy.flag = !1, h.queues = [], h }, h.stateChanged = !1, h.doubleChecker = !1, h.doubleCheckComplete = function () { return h.stateChanged = !0, h.doubleCheckClear(), h }, h.doubleCheckClear = function () { return h.doubleChecker && (u(h.doubleChecker), h.doubleChecker = !1), h }, h.doubleCheck = function (e) { return h.stateChanged = !1, h.doubleCheckClear(), h.bugs.ieDoubleCheck && (h.doubleChecker = o(function () { return h.doubleCheckClear(), h.stateChanged || e(), !0 }, h.options.doubleCheckInterval)), h }, h.safariStatePoll = function () { var t = h.extractState(h.getLocationHref()), n; if (!h.isLastSavedState(t)) return n = t, n || (n = h.createStateObject()), h.Adapter.trigger(e, "popstate"), h; return }, h.back = function (e) { return e !== !1 && h.busy() ? (h.pushQueue({ scope: h, callback: h.back, args: arguments, queue: e }), !1) : (h.busy(!0), h.doubleCheck(function () { h.back(!1) }), p.go(-1), !0) }, h.forward = function (e) { return e !== !1 && h.busy() ? (h.pushQueue({ scope: h, callback: h.forward, args: arguments, queue: e }), !1) : (h.busy(!0), h.doubleCheck(function () { h.forward(!1) }), p.go(1), !0) }, h.go = function (e, t) { var n; if (e > 0) for (n = 1; n <= e; ++n) h.forward(t); else { if (!(e < 0)) throw new Error("History.go: History.go requires a positive or negative integer passed."); for (n = -1; n >= e; --n) h.back(t) } return h }; if (h.emulated.pushState) { var v = function () { }; h.pushState = h.pushState || v, h.replaceState = h.replaceState || v } else h.onPopState = function (t, n) { var r = !1, i = !1, s, o; return h.doubleCheckComplete(), s = h.getHash(), s ? (o = h.extractState(s || h.getLocationHref(), !0), o ? h.replaceState(o.data, o.title, o.url, !1) : (h.Adapter.trigger(e, "anchorchange"), h.busy(!1)), h.expectedStateId = !1, !1) : (r = h.Adapter.extractEventData("state", t, n) || !1, r ? i = h.getStateById(r) : h.expectedStateId ? i = h.getStateById(h.expectedStateId) : i = h.extractState(h.getLocationHref()), i || (i = h.createStateObject(null, null, h.getLocationHref())), h.expectedStateId = !1, h.isLastSavedState(i) ? (h.busy(!1), !1) : (h.storeState(i), h.saveState(i), h.setTitle(i), h.Adapter.trigger(e, "statechange"), h.busy(!1), !0)) }, h.Adapter.bind(e, "popstate", h.onPopState), h.pushState = function (t, n, r, i) { if (h.getHashByUrl(r) && h.emulated.pushState) throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors)."); if (i !== !1 && h.busy()) return h.pushQueue({ scope: h, callback: h.pushState, args: arguments, queue: i }), !1; h.busy(!0); var s = h.createStateObject(t, n, r); return h.isLastSavedState(s) ? h.busy(!1) : (h.storeState(s), h.expectedStateId = s.id, p.pushState(s.id, s.title, s.url), h.Adapter.trigger(e, "popstate")), !0 }, h.replaceState = function (t, n, r, i) { if (h.getHashByUrl(r) && h.emulated.pushState) throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors)."); if (i !== !1 && h.busy()) return h.pushQueue({ scope: h, callback: h.replaceState, args: arguments, queue: i }), !1; h.busy(!0); var s = h.createStateObject(t, n, r); return h.isLastSavedState(s) ? h.busy(!1) : (h.storeState(s), h.expectedStateId = s.id, p.replaceState(s.id, s.title, s.url), h.Adapter.trigger(e, "popstate")), !0 }; if (s) { try { h.store = l.parse(s.getItem("History.store")) || {} } catch (m) { h.store = {} } h.normalizeStore() } else h.store = {}, h.normalizeStore(); h.Adapter.bind(e, "unload", h.clearAllIntervals), h.saveState(h.storeState(h.extractState(h.getLocationHref(), !0))), s && (h.onUnload = function () { var e, t, n; try { e = l.parse(s.getItem("History.store")) || {} } catch (r) { e = {} } e.idToState = e.idToState || {}, e.urlToId = e.urlToId || {}, e.stateToId = e.stateToId || {}; for (t in h.idToState) { if (!h.idToState.hasOwnProperty(t)) continue; e.idToState[t] = h.idToState[t] } for (t in h.urlToId) { if (!h.urlToId.hasOwnProperty(t)) continue; e.urlToId[t] = h.urlToId[t] } for (t in h.stateToId) { if (!h.stateToId.hasOwnProperty(t)) continue; e.stateToId[t] = h.stateToId[t] } h.store = e, h.normalizeStore(), n = l.stringify(e); try { s.setItem("History.store", n) } catch (i) { if (i.code !== DOMException.QUOTA_EXCEEDED_ERR) throw i; s.length && (s.removeItem("History.store"), s.setItem("History.store", n)) } }, h.intervalList.push(a(h.onUnload, h.options.storeInterval)), h.Adapter.bind(e, "beforeunload", h.onUnload), h.Adapter.bind(e, "unload", h.onUnload)); if (!h.emulated.pushState) { h.bugs.safariPoll && h.intervalList.push(a(h.safariStatePoll, h.options.safariPollInterval)); if (i.vendor === "Apple Computer, Inc." || (i.appCodeName || "") === "Mozilla") h.Adapter.bind(e, "hashchange", function () { h.Adapter.trigger(e, "popstate") }), h.getHash() && h.Adapter.onDomLoad(function () { h.Adapter.trigger(e, "hashchange") }) } }, (!h.options || !h.options.delayInit) && h.init() }(window)
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhpc3RvcnkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEFBTEEiLCJmaWxlIjoiaGlzdG9yeS5qcyIsInNvdXJjZXNDb250ZW50IjpbInR5cGVvZiBKU09OICE9IFwib2JqZWN0XCIgJiYgKEpTT04gPSB7fSksIGZ1bmN0aW9uICgpIHsgXCJ1c2Ugc3RyaWN0XCI7IGZ1bmN0aW9uIGYoZSkgeyByZXR1cm4gZSA8IDEwID8gXCIwXCIgKyBlIDogZSB9IGZ1bmN0aW9uIHF1b3RlKGUpIHsgcmV0dXJuIGVzY2FwYWJsZS5sYXN0SW5kZXggPSAwLCBlc2NhcGFibGUudGVzdChlKSA/ICdcIicgKyBlLnJlcGxhY2UoZXNjYXBhYmxlLCBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IG1ldGFbZV07IHJldHVybiB0eXBlb2YgdCA9PSBcInN0cmluZ1wiID8gdCA6IFwiXFxcXHVcIiArIChcIjAwMDBcIiArIGUuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC00KSB9KSArICdcIicgOiAnXCInICsgZSArICdcIicgfSBmdW5jdGlvbiBzdHIoZSwgdCkgeyB2YXIgbiwgciwgaSwgcywgbyA9IGdhcCwgdSwgYSA9IHRbZV07IGEgJiYgdHlwZW9mIGEgPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgYS50b0pTT04gPT0gXCJmdW5jdGlvblwiICYmIChhID0gYS50b0pTT04oZSkpLCB0eXBlb2YgcmVwID09IFwiZnVuY3Rpb25cIiAmJiAoYSA9IHJlcC5jYWxsKHQsIGUsIGEpKTsgc3dpdGNoICh0eXBlb2YgYSkgeyBjYXNlIFwic3RyaW5nXCI6IHJldHVybiBxdW90ZShhKTsgY2FzZSBcIm51bWJlclwiOiByZXR1cm4gaXNGaW5pdGUoYSkgPyBTdHJpbmcoYSkgOiBcIm51bGxcIjsgY2FzZSBcImJvb2xlYW5cIjogY2FzZSBcIm51bGxcIjogcmV0dXJuIFN0cmluZyhhKTsgY2FzZSBcIm9iamVjdFwiOiBpZiAoIWEpIHJldHVybiBcIm51bGxcIjsgZ2FwICs9IGluZGVudCwgdSA9IFtdOyBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5hcHBseShhKSA9PT0gXCJbb2JqZWN0IEFycmF5XVwiKSB7IHMgPSBhLmxlbmd0aDsgZm9yIChuID0gMDsgbiA8IHM7IG4gKz0gMSkgdVtuXSA9IHN0cihuLCBhKSB8fCBcIm51bGxcIjsgcmV0dXJuIGkgPSB1Lmxlbmd0aCA9PT0gMCA/IFwiW11cIiA6IGdhcCA/IFwiW1xcblwiICsgZ2FwICsgdS5qb2luKFwiLFxcblwiICsgZ2FwKSArIFwiXFxuXCIgKyBvICsgXCJdXCIgOiBcIltcIiArIHUuam9pbihcIixcIikgKyBcIl1cIiwgZ2FwID0gbywgaSB9IGlmIChyZXAgJiYgdHlwZW9mIHJlcCA9PSBcIm9iamVjdFwiKSB7IHMgPSByZXAubGVuZ3RoOyBmb3IgKG4gPSAwOyBuIDwgczsgbiArPSAxKSB0eXBlb2YgcmVwW25dID09IFwic3RyaW5nXCIgJiYgKHIgPSByZXBbbl0sIGkgPSBzdHIociwgYSksIGkgJiYgdS5wdXNoKHF1b3RlKHIpICsgKGdhcCA/IFwiOiBcIiA6IFwiOlwiKSArIGkpKSB9IGVsc2UgZm9yIChyIGluIGEpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLCByKSAmJiAoaSA9IHN0cihyLCBhKSwgaSAmJiB1LnB1c2gocXVvdGUocikgKyAoZ2FwID8gXCI6IFwiIDogXCI6XCIpICsgaSkpOyByZXR1cm4gaSA9IHUubGVuZ3RoID09PSAwID8gXCJ7fVwiIDogZ2FwID8gXCJ7XFxuXCIgKyBnYXAgKyB1LmpvaW4oXCIsXFxuXCIgKyBnYXApICsgXCJcXG5cIiArIG8gKyBcIn1cIiA6IFwie1wiICsgdS5qb2luKFwiLFwiKSArIFwifVwiLCBnYXAgPSBvLCBpIH0gfSB0eXBlb2YgRGF0ZS5wcm90b3R5cGUudG9KU09OICE9IFwiZnVuY3Rpb25cIiAmJiAoRGF0ZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGlzRmluaXRlKHRoaXMudmFsdWVPZigpKSA/IHRoaXMuZ2V0VVRDRnVsbFllYXIoKSArIFwiLVwiICsgZih0aGlzLmdldFVUQ01vbnRoKCkgKyAxKSArIFwiLVwiICsgZih0aGlzLmdldFVUQ0RhdGUoKSkgKyBcIlRcIiArIGYodGhpcy5nZXRVVENIb3VycygpKSArIFwiOlwiICsgZih0aGlzLmdldFVUQ01pbnV0ZXMoKSkgKyBcIjpcIiArIGYodGhpcy5nZXRVVENTZWNvbmRzKCkpICsgXCJaXCIgOiBudWxsIH0sIFN0cmluZy5wcm90b3R5cGUudG9KU09OID0gTnVtYmVyLnByb3RvdHlwZS50b0pTT04gPSBCb29sZWFuLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gdGhpcy52YWx1ZU9mKCkgfSk7IHZhciBjeCA9IC9bXFx1MDAwMFxcdTAwYWRcXHUwNjAwLVxcdTA2MDRcXHUwNzBmXFx1MTdiNFxcdTE3YjVcXHUyMDBjLVxcdTIwMGZcXHUyMDI4LVxcdTIwMmZcXHUyMDYwLVxcdTIwNmZcXHVmZWZmXFx1ZmZmMC1cXHVmZmZmXS9nLCBlc2NhcGFibGUgPSAvW1xcXFxcXFwiXFx4MDAtXFx4MWZcXHg3Zi1cXHg5ZlxcdTAwYWRcXHUwNjAwLVxcdTA2MDRcXHUwNzBmXFx1MTdiNFxcdTE3YjVcXHUyMDBjLVxcdTIwMGZcXHUyMDI4LVxcdTIwMmZcXHUyMDYwLVxcdTIwNmZcXHVmZWZmXFx1ZmZmMC1cXHVmZmZmXS9nLCBnYXAsIGluZGVudCwgbWV0YSA9IHsgXCJcXGJcIjogXCJcXFxcYlwiLCBcIlx0XCI6IFwiXFxcXHRcIiwgXCJcXG5cIjogXCJcXFxcblwiLCBcIlxcZlwiOiBcIlxcXFxmXCIsIFwiXFxyXCI6IFwiXFxcXHJcIiwgJ1wiJzogJ1xcXFxcIicsIFwiXFxcXFwiOiBcIlxcXFxcXFxcXCIgfSwgcmVwOyB0eXBlb2YgSlNPTi5zdHJpbmdpZnkgIT0gXCJmdW5jdGlvblwiICYmIChKU09OLnN0cmluZ2lmeSA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7IHZhciByOyBnYXAgPSBcIlwiLCBpbmRlbnQgPSBcIlwiOyBpZiAodHlwZW9mIG4gPT0gXCJudW1iZXJcIikgZm9yIChyID0gMDsgciA8IG47IHIgKz0gMSkgaW5kZW50ICs9IFwiIFwiOyBlbHNlIHR5cGVvZiBuID09IFwic3RyaW5nXCIgJiYgKGluZGVudCA9IG4pOyByZXAgPSB0OyBpZiAoIXQgfHwgdHlwZW9mIHQgPT0gXCJmdW5jdGlvblwiIHx8IHR5cGVvZiB0ID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHQubGVuZ3RoID09IFwibnVtYmVyXCIpIHJldHVybiBzdHIoXCJcIiwgeyBcIlwiOiBlIH0pOyB0aHJvdyBuZXcgRXJyb3IoXCJKU09OLnN0cmluZ2lmeVwiKSB9KSwgdHlwZW9mIEpTT04ucGFyc2UgIT0gXCJmdW5jdGlvblwiICYmIChKU09OLnBhcnNlID0gZnVuY3Rpb24gKHRleHQsIHJldml2ZXIpIHsgZnVuY3Rpb24gd2FsayhlLCB0KSB7IHZhciBuLCByLCBpID0gZVt0XTsgaWYgKGkgJiYgdHlwZW9mIGkgPT0gXCJvYmplY3RcIikgZm9yIChuIGluIGkpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpLCBuKSAmJiAociA9IHdhbGsoaSwgbiksIHIgIT09IHVuZGVmaW5lZCA/IGlbbl0gPSByIDogZGVsZXRlIGlbbl0pOyByZXR1cm4gcmV2aXZlci5jYWxsKGUsIHQsIGkpIH0gdmFyIGo7IHRleHQgPSBTdHJpbmcodGV4dCksIGN4Lmxhc3RJbmRleCA9IDAsIGN4LnRlc3QodGV4dCkgJiYgKHRleHQgPSB0ZXh0LnJlcGxhY2UoY3gsIGZ1bmN0aW9uIChlKSB7IHJldHVybiBcIlxcXFx1XCIgKyAoXCIwMDAwXCIgKyBlLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCkgfSkpOyBpZiAoL15bXFxdLDp7fVxcc10qJC8udGVzdCh0ZXh0LnJlcGxhY2UoL1xcXFwoPzpbXCJcXFxcXFwvYmZucnRdfHVbMC05YS1mQS1GXXs0fSkvZywgXCJAXCIpLnJlcGxhY2UoL1wiW15cIlxcXFxcXG5cXHJdKlwifHRydWV8ZmFsc2V8bnVsbHwtP1xcZCsoPzpcXC5cXGQqKT8oPzpbZUVdWytcXC1dP1xcZCspPy9nLCBcIl1cIikucmVwbGFjZSgvKD86Xnw6fCwpKD86XFxzKlxcWykrL2csIFwiXCIpKSkgcmV0dXJuIGogPSBldmFsKFwiKFwiICsgdGV4dCArIFwiKVwiKSwgdHlwZW9mIHJldml2ZXIgPT0gXCJmdW5jdGlvblwiID8gd2Fsayh7IFwiXCI6IGogfSwgXCJcIikgOiBqOyB0aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJKU09OLnBhcnNlXCIpIH0pIH0oKSwgZnVuY3Rpb24gKGUsIHQpIHsgXCJ1c2Ugc3RyaWN0XCI7IHZhciBuID0gZS5IaXN0b3J5ID0gZS5IaXN0b3J5IHx8IHt9OyBpZiAodHlwZW9mIG4uQWRhcHRlciAhPSBcInVuZGVmaW5lZFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJIaXN0b3J5LmpzIEFkYXB0ZXIgaGFzIGFscmVhZHkgYmVlbiBsb2FkZWQuLi5cIik7IG4uQWRhcHRlciA9IHsgaGFuZGxlcnM6IHt9LCBfdWlkOiAxLCB1aWQ6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBlLl91aWQgfHwgKGUuX3VpZCA9IG4uQWRhcHRlci5fdWlkKyspIH0sIGJpbmQ6IGZ1bmN0aW9uIChlLCB0LCByKSB7IHZhciBpID0gbi5BZGFwdGVyLnVpZChlKTsgbi5BZGFwdGVyLmhhbmRsZXJzW2ldID0gbi5BZGFwdGVyLmhhbmRsZXJzW2ldIHx8IHt9LCBuLkFkYXB0ZXIuaGFuZGxlcnNbaV1bdF0gPSBuLkFkYXB0ZXIuaGFuZGxlcnNbaV1bdF0gfHwgW10sIG4uQWRhcHRlci5oYW5kbGVyc1tpXVt0XS5wdXNoKHIpLCBlW1wib25cIiArIHRdID0gZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIGZ1bmN0aW9uIChyKSB7IG4uQWRhcHRlci50cmlnZ2VyKGUsIHQsIHIpIH0gfShlLCB0KSB9LCB0cmlnZ2VyOiBmdW5jdGlvbiAoZSwgdCwgcikgeyByID0gciB8fCB7fTsgdmFyIGkgPSBuLkFkYXB0ZXIudWlkKGUpLCBzLCBvOyBuLkFkYXB0ZXIuaGFuZGxlcnNbaV0gPSBuLkFkYXB0ZXIuaGFuZGxlcnNbaV0gfHwge30sIG4uQWRhcHRlci5oYW5kbGVyc1tpXVt0XSA9IG4uQWRhcHRlci5oYW5kbGVyc1tpXVt0XSB8fCBbXTsgZm9yIChzID0gMCwgbyA9IG4uQWRhcHRlci5oYW5kbGVyc1tpXVt0XS5sZW5ndGg7IHMgPCBvOyArK3MpIG4uQWRhcHRlci5oYW5kbGVyc1tpXVt0XVtzXS5hcHBseSh0aGlzLCBbcl0pIH0sIGV4dHJhY3RFdmVudERhdGE6IGZ1bmN0aW9uIChlLCBuKSB7IHZhciByID0gbiAmJiBuW2VdIHx8IHQ7IHJldHVybiByIH0sIG9uRG9tTG9hZDogZnVuY3Rpb24gKHQpIHsgdmFyIG4gPSBlLnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyB0KCkgfSwgMmUzKTsgZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7IGNsZWFyVGltZW91dChuKSwgdCgpIH0gfSB9LCB0eXBlb2Ygbi5pbml0ICE9IFwidW5kZWZpbmVkXCIgJiYgbi5pbml0KCkgfSh3aW5kb3cpLCBmdW5jdGlvbiAoZSwgdCkgeyBcInVzZSBzdHJpY3RcIjsgdmFyIG4gPSBlLmRvY3VtZW50LCByID0gZS5zZXRUaW1lb3V0IHx8IHIsIGkgPSBlLmNsZWFyVGltZW91dCB8fCBpLCBzID0gZS5zZXRJbnRlcnZhbCB8fCBzLCBvID0gZS5IaXN0b3J5ID0gZS5IaXN0b3J5IHx8IHt9OyBpZiAodHlwZW9mIG8uaW5pdEh0bWw0ICE9IFwidW5kZWZpbmVkXCIpIHRocm93IG5ldyBFcnJvcihcIkhpc3RvcnkuanMgSFRNTDQgU3VwcG9ydCBoYXMgYWxyZWFkeSBiZWVuIGxvYWRlZC4uLlwiKTsgby5pbml0SHRtbDQgPSBmdW5jdGlvbiAoKSB7IGlmICh0eXBlb2Ygby5pbml0SHRtbDQuaW5pdGlhbGl6ZWQgIT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuICExOyBvLmluaXRIdG1sNC5pbml0aWFsaXplZCA9ICEwLCBvLmVuYWJsZWQgPSAhMCwgby5zYXZlZEhhc2hlcyA9IFtdLCBvLmlzTGFzdEhhc2ggPSBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IG8uZ2V0SGFzaEJ5SW5kZXgoKSwgbjsgcmV0dXJuIG4gPSBlID09PSB0LCBuIH0sIG8uaXNIYXNoRXF1YWwgPSBmdW5jdGlvbiAoZSwgdCkgeyByZXR1cm4gZSA9IGVuY29kZVVSSUNvbXBvbmVudChlKS5yZXBsYWNlKC8lMjUvZywgXCIlXCIpLCB0ID0gZW5jb2RlVVJJQ29tcG9uZW50KHQpLnJlcGxhY2UoLyUyNS9nLCBcIiVcIiksIGUgPT09IHQgfSwgby5zYXZlSGFzaCA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiBvLmlzTGFzdEhhc2goZSkgPyAhMSA6IChvLnNhdmVkSGFzaGVzLnB1c2goZSksICEwKSB9LCBvLmdldEhhc2hCeUluZGV4ID0gZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSBudWxsOyByZXR1cm4gdHlwZW9mIGUgPT0gXCJ1bmRlZmluZWRcIiA/IHQgPSBvLnNhdmVkSGFzaGVzW28uc2F2ZWRIYXNoZXMubGVuZ3RoIC0gMV0gOiBlIDwgMCA/IHQgPSBvLnNhdmVkSGFzaGVzW28uc2F2ZWRIYXNoZXMubGVuZ3RoICsgZV0gOiB0ID0gby5zYXZlZEhhc2hlc1tlXSwgdCB9LCBvLmRpc2NhcmRlZEhhc2hlcyA9IHt9LCBvLmRpc2NhcmRlZFN0YXRlcyA9IHt9LCBvLmRpc2NhcmRTdGF0ZSA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7IHZhciByID0gby5nZXRIYXNoQnlTdGF0ZShlKSwgaTsgcmV0dXJuIGkgPSB7IGRpc2NhcmRlZFN0YXRlOiBlLCBiYWNrU3RhdGU6IG4sIGZvcndhcmRTdGF0ZTogdCB9LCBvLmRpc2NhcmRlZFN0YXRlc1tyXSA9IGksICEwIH0sIG8uZGlzY2FyZEhhc2ggPSBmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgciA9IHsgZGlzY2FyZGVkSGFzaDogZSwgYmFja1N0YXRlOiBuLCBmb3J3YXJkU3RhdGU6IHQgfTsgcmV0dXJuIG8uZGlzY2FyZGVkSGFzaGVzW2VdID0gciwgITAgfSwgby5kaXNjYXJkZWRTdGF0ZSA9IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gby5nZXRIYXNoQnlTdGF0ZShlKSwgbjsgcmV0dXJuIG4gPSBvLmRpc2NhcmRlZFN0YXRlc1t0XSB8fCAhMSwgbiB9LCBvLmRpc2NhcmRlZEhhc2ggPSBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IG8uZGlzY2FyZGVkSGFzaGVzW2VdIHx8ICExOyByZXR1cm4gdCB9LCBvLnJlY3ljbGVTdGF0ZSA9IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gby5nZXRIYXNoQnlTdGF0ZShlKTsgcmV0dXJuIG8uZGlzY2FyZGVkU3RhdGUoZSkgJiYgZGVsZXRlIG8uZGlzY2FyZGVkU3RhdGVzW3RdLCAhMCB9LCBvLmVtdWxhdGVkLmhhc2hDaGFuZ2UgJiYgKG8uaGFzaENoYW5nZUluaXQgPSBmdW5jdGlvbiAoKSB7IG8uY2hlY2tlckZ1bmN0aW9uID0gbnVsbDsgdmFyIHQgPSBcIlwiLCByLCBpLCB1LCBhLCBmID0gQm9vbGVhbihvLmdldEhhc2goKSk7IHJldHVybiBvLmlzSW50ZXJuZXRFeHBsb3JlcigpID8gKHIgPSBcImhpc3Rvcnlqcy1pZnJhbWVcIiwgaSA9IG4uY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKSwgaS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCByKSwgaS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgXCIjXCIpLCBpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIiwgbi5ib2R5LmFwcGVuZENoaWxkKGkpLCBpLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQub3BlbigpLCBpLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuY2xvc2UoKSwgdSA9IFwiXCIsIGEgPSAhMSwgby5jaGVja2VyRnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7IGlmIChhKSByZXR1cm4gITE7IGEgPSAhMDsgdmFyIG4gPSBvLmdldEhhc2goKSwgciA9IG8uZ2V0SGFzaChpLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQpOyByZXR1cm4gbiAhPT0gdCA/ICh0ID0gbiwgciAhPT0gbiAmJiAodSA9IHIgPSBuLCBpLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQub3BlbigpLCBpLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuY2xvc2UoKSwgaS5jb250ZW50V2luZG93LmRvY3VtZW50LmxvY2F0aW9uLmhhc2ggPSBvLmVzY2FwZUhhc2gobikpLCBvLkFkYXB0ZXIudHJpZ2dlcihlLCBcImhhc2hjaGFuZ2VcIikpIDogciAhPT0gdSAmJiAodSA9IHIsIGYgJiYgciA9PT0gXCJcIiA/IG8uYmFjaygpIDogby5zZXRIYXNoKHIsICExKSksIGEgPSAhMSwgITAgfSkgOiBvLmNoZWNrZXJGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHsgdmFyIG4gPSBvLmdldEhhc2goKSB8fCBcIlwiOyByZXR1cm4gbiAhPT0gdCAmJiAodCA9IG4sIG8uQWRhcHRlci50cmlnZ2VyKGUsIFwiaGFzaGNoYW5nZVwiKSksICEwIH0sIG8uaW50ZXJ2YWxMaXN0LnB1c2gocyhvLmNoZWNrZXJGdW5jdGlvbiwgby5vcHRpb25zLmhhc2hDaGFuZ2VJbnRlcnZhbCkpLCAhMCB9LCBvLkFkYXB0ZXIub25Eb21Mb2FkKG8uaGFzaENoYW5nZUluaXQpKSwgby5lbXVsYXRlZC5wdXNoU3RhdGUgJiYgKG8ub25IYXNoQ2hhbmdlID0gZnVuY3Rpb24gKHQpIHsgdmFyIG4gPSB0ICYmIHQubmV3VVJMIHx8IG8uZ2V0TG9jYXRpb25IcmVmKCksIHIgPSBvLmdldEhhc2hCeVVybChuKSwgaSA9IG51bGwsIHMgPSBudWxsLCB1ID0gbnVsbCwgYTsgcmV0dXJuIG8uaXNMYXN0SGFzaChyKSA/IChvLmJ1c3koITEpLCAhMSkgOiAoby5kb3VibGVDaGVja0NvbXBsZXRlKCksIG8uc2F2ZUhhc2gociksIHIgJiYgby5pc1RyYWRpdGlvbmFsQW5jaG9yKHIpID8gKG8uQWRhcHRlci50cmlnZ2VyKGUsIFwiYW5jaG9yY2hhbmdlXCIpLCBvLmJ1c3koITEpLCAhMSkgOiAoaSA9IG8uZXh0cmFjdFN0YXRlKG8uZ2V0RnVsbFVybChyIHx8IG8uZ2V0TG9jYXRpb25IcmVmKCkpLCAhMCksIG8uaXNMYXN0U2F2ZWRTdGF0ZShpKSA/IChvLmJ1c3koITEpLCAhMSkgOiAocyA9IG8uZ2V0SGFzaEJ5U3RhdGUoaSksIGEgPSBvLmRpc2NhcmRlZFN0YXRlKGkpLCBhID8gKG8uZ2V0SGFzaEJ5SW5kZXgoLTIpID09PSBvLmdldEhhc2hCeVN0YXRlKGEuZm9yd2FyZFN0YXRlKSA/IG8uYmFjayghMSkgOiBvLmZvcndhcmQoITEpLCAhMSkgOiAoby5wdXNoU3RhdGUoaS5kYXRhLCBpLnRpdGxlLCBlbmNvZGVVUkkoaS51cmwpLCAhMSksICEwKSkpKSB9LCBvLkFkYXB0ZXIuYmluZChlLCBcImhhc2hjaGFuZ2VcIiwgby5vbkhhc2hDaGFuZ2UpLCBvLnB1c2hTdGF0ZSA9IGZ1bmN0aW9uICh0LCBuLCByLCBpKSB7IHIgPSBlbmNvZGVVUkkocikucmVwbGFjZSgvJTI1L2csIFwiJVwiKTsgaWYgKG8uZ2V0SGFzaEJ5VXJsKHIpKSB0aHJvdyBuZXcgRXJyb3IoXCJIaXN0b3J5LmpzIGRvZXMgbm90IHN1cHBvcnQgc3RhdGVzIHdpdGggZnJhZ21lbnQtaWRlbnRpZmllcnMgKGhhc2hlcy9hbmNob3JzKS5cIik7IGlmIChpICE9PSAhMSAmJiBvLmJ1c3koKSkgcmV0dXJuIG8ucHVzaFF1ZXVlKHsgc2NvcGU6IG8sIGNhbGxiYWNrOiBvLnB1c2hTdGF0ZSwgYXJnczogYXJndW1lbnRzLCBxdWV1ZTogaSB9KSwgITE7IG8uYnVzeSghMCk7IHZhciBzID0gby5jcmVhdGVTdGF0ZU9iamVjdCh0LCBuLCByKSwgdSA9IG8uZ2V0SGFzaEJ5U3RhdGUocyksIGEgPSBvLmdldFN0YXRlKCExKSwgZiA9IG8uZ2V0SGFzaEJ5U3RhdGUoYSksIGwgPSBvLmdldEhhc2goKSwgYyA9IG8uZXhwZWN0ZWRTdGF0ZUlkID09IHMuaWQ7IHJldHVybiBvLnN0b3JlU3RhdGUocyksIG8uZXhwZWN0ZWRTdGF0ZUlkID0gcy5pZCwgby5yZWN5Y2xlU3RhdGUocyksIG8uc2V0VGl0bGUocyksIHUgPT09IGYgPyAoby5idXN5KCExKSwgITEpIDogKG8uc2F2ZVN0YXRlKHMpLCBjIHx8IG8uQWRhcHRlci50cmlnZ2VyKGUsIFwic3RhdGVjaGFuZ2VcIiksICFvLmlzSGFzaEVxdWFsKHUsIGwpICYmICFvLmlzSGFzaEVxdWFsKHUsIG8uZ2V0U2hvcnRVcmwoby5nZXRMb2NhdGlvbkhyZWYoKSkpICYmIG8uc2V0SGFzaCh1LCAhMSksIG8uYnVzeSghMSksICEwKSB9LCBvLnJlcGxhY2VTdGF0ZSA9IGZ1bmN0aW9uICh0LCBuLCByLCBpKSB7IHIgPSBlbmNvZGVVUkkocikucmVwbGFjZSgvJTI1L2csIFwiJVwiKTsgaWYgKG8uZ2V0SGFzaEJ5VXJsKHIpKSB0aHJvdyBuZXcgRXJyb3IoXCJIaXN0b3J5LmpzIGRvZXMgbm90IHN1cHBvcnQgc3RhdGVzIHdpdGggZnJhZ21lbnQtaWRlbnRpZmllcnMgKGhhc2hlcy9hbmNob3JzKS5cIik7IGlmIChpICE9PSAhMSAmJiBvLmJ1c3koKSkgcmV0dXJuIG8ucHVzaFF1ZXVlKHsgc2NvcGU6IG8sIGNhbGxiYWNrOiBvLnJlcGxhY2VTdGF0ZSwgYXJnczogYXJndW1lbnRzLCBxdWV1ZTogaSB9KSwgITE7IG8uYnVzeSghMCk7IHZhciBzID0gby5jcmVhdGVTdGF0ZU9iamVjdCh0LCBuLCByKSwgdSA9IG8uZ2V0SGFzaEJ5U3RhdGUocyksIGEgPSBvLmdldFN0YXRlKCExKSwgZiA9IG8uZ2V0SGFzaEJ5U3RhdGUoYSksIGwgPSBvLmdldFN0YXRlQnlJbmRleCgtMik7IHJldHVybiBvLmRpc2NhcmRTdGF0ZShhLCBzLCBsKSwgdSA9PT0gZiA/IChvLnN0b3JlU3RhdGUocyksIG8uZXhwZWN0ZWRTdGF0ZUlkID0gcy5pZCwgby5yZWN5Y2xlU3RhdGUocyksIG8uc2V0VGl0bGUocyksIG8uc2F2ZVN0YXRlKHMpLCBvLkFkYXB0ZXIudHJpZ2dlcihlLCBcInN0YXRlY2hhbmdlXCIpLCBvLmJ1c3koITEpKSA6IG8ucHVzaFN0YXRlKHMuZGF0YSwgcy50aXRsZSwgcy51cmwsICExKSwgITAgfSksIG8uZW11bGF0ZWQucHVzaFN0YXRlICYmIG8uZ2V0SGFzaCgpICYmICFvLmVtdWxhdGVkLmhhc2hDaGFuZ2UgJiYgby5BZGFwdGVyLm9uRG9tTG9hZChmdW5jdGlvbiAoKSB7IG8uQWRhcHRlci50cmlnZ2VyKGUsIFwiaGFzaGNoYW5nZVwiKSB9KSB9LCB0eXBlb2Ygby5pbml0ICE9IFwidW5kZWZpbmVkXCIgJiYgby5pbml0KCkgfSh3aW5kb3cpLCBmdW5jdGlvbiAoZSwgdCkgeyBcInVzZSBzdHJpY3RcIjsgdmFyIG4gPSBlLmNvbnNvbGUgfHwgdCwgciA9IGUuZG9jdW1lbnQsIGkgPSBlLm5hdmlnYXRvciwgcyA9IGUuc2Vzc2lvblN0b3JhZ2UgfHwgITEsIG8gPSBlLnNldFRpbWVvdXQsIHUgPSBlLmNsZWFyVGltZW91dCwgYSA9IGUuc2V0SW50ZXJ2YWwsIGYgPSBlLmNsZWFySW50ZXJ2YWwsIGwgPSBlLkpTT04sIGMgPSBlLmFsZXJ0LCBoID0gZS5IaXN0b3J5ID0gZS5IaXN0b3J5IHx8IHt9LCBwID0gZS5oaXN0b3J5OyB0cnkgeyBzLnNldEl0ZW0oXCJURVNUXCIsIFwiMVwiKSwgcy5yZW1vdmVJdGVtKFwiVEVTVFwiKSB9IGNhdGNoIChkKSB7IHMgPSAhMSB9IGwuc3RyaW5naWZ5ID0gbC5zdHJpbmdpZnkgfHwgbC5lbmNvZGUsIGwucGFyc2UgPSBsLnBhcnNlIHx8IGwuZGVjb2RlOyBpZiAodHlwZW9mIGguaW5pdCAhPSBcInVuZGVmaW5lZFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJIaXN0b3J5LmpzIENvcmUgaGFzIGFscmVhZHkgYmVlbiBsb2FkZWQuLi5cIik7IGguaW5pdCA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiB0eXBlb2YgaC5BZGFwdGVyID09IFwidW5kZWZpbmVkXCIgPyAhMSA6ICh0eXBlb2YgaC5pbml0Q29yZSAhPSBcInVuZGVmaW5lZFwiICYmIGguaW5pdENvcmUoKSwgdHlwZW9mIGguaW5pdEh0bWw0ICE9IFwidW5kZWZpbmVkXCIgJiYgaC5pbml0SHRtbDQoKSwgITApIH0sIGguaW5pdENvcmUgPSBmdW5jdGlvbiAoZCkgeyBpZiAodHlwZW9mIGguaW5pdENvcmUuaW5pdGlhbGl6ZWQgIT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuICExOyBoLmluaXRDb3JlLmluaXRpYWxpemVkID0gITAsIGgub3B0aW9ucyA9IGgub3B0aW9ucyB8fCB7fSwgaC5vcHRpb25zLmhhc2hDaGFuZ2VJbnRlcnZhbCA9IGgub3B0aW9ucy5oYXNoQ2hhbmdlSW50ZXJ2YWwgfHwgMTAwLCBoLm9wdGlvbnMuc2FmYXJpUG9sbEludGVydmFsID0gaC5vcHRpb25zLnNhZmFyaVBvbGxJbnRlcnZhbCB8fCA1MDAsIGgub3B0aW9ucy5kb3VibGVDaGVja0ludGVydmFsID0gaC5vcHRpb25zLmRvdWJsZUNoZWNrSW50ZXJ2YWwgfHwgNTAwLCBoLm9wdGlvbnMuZGlzYWJsZVN1aWQgPSBoLm9wdGlvbnMuZGlzYWJsZVN1aWQgfHwgITEsIGgub3B0aW9ucy5zdG9yZUludGVydmFsID0gaC5vcHRpb25zLnN0b3JlSW50ZXJ2YWwgfHwgMWUzLCBoLm9wdGlvbnMuYnVzeURlbGF5ID0gaC5vcHRpb25zLmJ1c3lEZWxheSB8fCAyNTAsIGgub3B0aW9ucy5kZWJ1ZyA9IGgub3B0aW9ucy5kZWJ1ZyB8fCAhMSwgaC5vcHRpb25zLmluaXRpYWxUaXRsZSA9IGgub3B0aW9ucy5pbml0aWFsVGl0bGUgfHwgci50aXRsZSwgaC5vcHRpb25zLmh0bWw0TW9kZSA9IGgub3B0aW9ucy5odG1sNE1vZGUgfHwgITEsIGgub3B0aW9ucy5kZWxheUluaXQgPSBoLm9wdGlvbnMuZGVsYXlJbml0IHx8ICExLCBoLmludGVydmFsTGlzdCA9IFtdLCBoLmNsZWFyQWxsSW50ZXJ2YWxzID0gZnVuY3Rpb24gKCkgeyB2YXIgZSwgdCA9IGguaW50ZXJ2YWxMaXN0OyBpZiAodHlwZW9mIHQgIT0gXCJ1bmRlZmluZWRcIiAmJiB0ICE9PSBudWxsKSB7IGZvciAoZSA9IDA7IGUgPCB0Lmxlbmd0aDsgZSsrKSBmKHRbZV0pOyBoLmludGVydmFsTGlzdCA9IG51bGwgfSB9LCBoLmRlYnVnID0gZnVuY3Rpb24gKCkgeyAoaC5vcHRpb25zLmRlYnVnIHx8ICExKSAmJiBoLmxvZy5hcHBseShoLCBhcmd1bWVudHMpIH0sIGgubG9nID0gZnVuY3Rpb24gKCkgeyB2YXIgZSA9IHR5cGVvZiBuICE9IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIG4ubG9nICE9IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIG4ubG9nLmFwcGx5ICE9IFwidW5kZWZpbmVkXCIsIHQgPSByLmdldEVsZW1lbnRCeUlkKFwibG9nXCIpLCBpLCBzLCBvLCB1LCBhOyBlID8gKHUgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLCBpID0gdS5zaGlmdCgpLCB0eXBlb2Ygbi5kZWJ1ZyAhPSBcInVuZGVmaW5lZFwiID8gbi5kZWJ1Zy5hcHBseShuLCBbaSwgdV0pIDogbi5sb2cuYXBwbHkobiwgW2ksIHVdKSkgOiBpID0gXCJcXG5cIiArIGFyZ3VtZW50c1swXSArIFwiXFxuXCI7IGZvciAocyA9IDEsIG8gPSBhcmd1bWVudHMubGVuZ3RoOyBzIDwgbzsgKytzKSB7IGEgPSBhcmd1bWVudHNbc107IGlmICh0eXBlb2YgYSA9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBsICE9IFwidW5kZWZpbmVkXCIpIHRyeSB7IGEgPSBsLnN0cmluZ2lmeShhKSB9IGNhdGNoIChmKSB7IH0gaSArPSBcIlxcblwiICsgYSArIFwiXFxuXCIgfSByZXR1cm4gdCA/ICh0LnZhbHVlICs9IGkgKyBcIlxcbi0tLS0tXFxuXCIsIHQuc2Nyb2xsVG9wID0gdC5zY3JvbGxIZWlnaHQgLSB0LmNsaWVudEhlaWdodCkgOiBlIHx8IGMoaSksICEwIH0sIGguZ2V0SW50ZXJuZXRFeHBsb3Jlck1ham9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsgdmFyIGUgPSBoLmdldEludGVybmV0RXhwbG9yZXJNYWpvclZlcnNpb24uY2FjaGVkID0gdHlwZW9mIGguZ2V0SW50ZXJuZXRFeHBsb3Jlck1ham9yVmVyc2lvbi5jYWNoZWQgIT0gXCJ1bmRlZmluZWRcIiA/IGguZ2V0SW50ZXJuZXRFeHBsb3Jlck1ham9yVmVyc2lvbi5jYWNoZWQgOiBmdW5jdGlvbiAoKSB7IHZhciBlID0gMywgdCA9IHIuY3JlYXRlRWxlbWVudChcImRpdlwiKSwgbiA9IHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpXCIpOyB3aGlsZSAoKHQuaW5uZXJIVE1MID0gXCI8IS0tW2lmIGd0IElFIFwiICsgKytlICsgXCJdPjxpPjwvaT48IVtlbmRpZl0tLT5cIikgJiYgblswXSk7IHJldHVybiBlID4gNCA/IGUgOiAhMSB9KCk7IHJldHVybiBlIH0sIGguaXNJbnRlcm5ldEV4cGxvcmVyID0gZnVuY3Rpb24gKCkgeyB2YXIgZSA9IGguaXNJbnRlcm5ldEV4cGxvcmVyLmNhY2hlZCA9IHR5cGVvZiBoLmlzSW50ZXJuZXRFeHBsb3Jlci5jYWNoZWQgIT0gXCJ1bmRlZmluZWRcIiA/IGguaXNJbnRlcm5ldEV4cGxvcmVyLmNhY2hlZCA6IEJvb2xlYW4oaC5nZXRJbnRlcm5ldEV4cGxvcmVyTWFqb3JWZXJzaW9uKCkpOyByZXR1cm4gZSB9LCBoLm9wdGlvbnMuaHRtbDRNb2RlID8gaC5lbXVsYXRlZCA9IHsgcHVzaFN0YXRlOiAhMCwgaGFzaENoYW5nZTogITAgfSA6IGguZW11bGF0ZWQgPSB7IHB1c2hTdGF0ZTogIUJvb2xlYW4oZS5oaXN0b3J5ICYmIGUuaGlzdG9yeS5wdXNoU3RhdGUgJiYgZS5oaXN0b3J5LnJlcGxhY2VTdGF0ZSAmJiAhLyBNb2JpbGVcXC8oWzEtN11bYS16XXwoOChbYWJjZGVdfGYoMVswLThdKSkpKS9pLnRlc3QoaS51c2VyQWdlbnQpICYmICEvQXBwbGVXZWJLaXRcXC81KFswLTJdfDNbMC0yXSkvaS50ZXN0KGkudXNlckFnZW50KSksIGhhc2hDaGFuZ2U6IEJvb2xlYW4oIShcIm9uaGFzaGNoYW5nZVwiIGluIGUgfHwgXCJvbmhhc2hjaGFuZ2VcIiBpbiByKSB8fCBoLmlzSW50ZXJuZXRFeHBsb3JlcigpICYmIGguZ2V0SW50ZXJuZXRFeHBsb3Jlck1ham9yVmVyc2lvbigpIDwgOCkgfSwgaC5lbmFibGVkID0gIWguZW11bGF0ZWQucHVzaFN0YXRlLCBoLmJ1Z3MgPSB7IHNldEhhc2g6IEJvb2xlYW4oIWguZW11bGF0ZWQucHVzaFN0YXRlICYmIGkudmVuZG9yID09PSBcIkFwcGxlIENvbXB1dGVyLCBJbmMuXCIgJiYgL0FwcGxlV2ViS2l0XFwvNShbMC0yXXwzWzAtM10pLy50ZXN0KGkudXNlckFnZW50KSksIHNhZmFyaVBvbGw6IEJvb2xlYW4oIWguZW11bGF0ZWQucHVzaFN0YXRlICYmIGkudmVuZG9yID09PSBcIkFwcGxlIENvbXB1dGVyLCBJbmMuXCIgJiYgL0FwcGxlV2ViS2l0XFwvNShbMC0yXXwzWzAtM10pLy50ZXN0KGkudXNlckFnZW50KSksIGllRG91YmxlQ2hlY2s6IEJvb2xlYW4oaC5pc0ludGVybmV0RXhwbG9yZXIoKSAmJiBoLmdldEludGVybmV0RXhwbG9yZXJNYWpvclZlcnNpb24oKSA8IDgpLCBoYXNoRXNjYXBlOiBCb29sZWFuKGguaXNJbnRlcm5ldEV4cGxvcmVyKCkgJiYgaC5nZXRJbnRlcm5ldEV4cGxvcmVyTWFqb3JWZXJzaW9uKCkgPCA3KSB9LCBoLmlzRW1wdHlPYmplY3QgPSBmdW5jdGlvbiAoZSkgeyBmb3IgKHZhciB0IGluIGUpIGlmIChlLmhhc093blByb3BlcnR5KHQpKSByZXR1cm4gITE7IHJldHVybiAhMCB9LCBoLmNsb25lT2JqZWN0ID0gZnVuY3Rpb24gKGUpIHsgdmFyIHQsIG47IHJldHVybiBlID8gKHQgPSBsLnN0cmluZ2lmeShlKSwgbiA9IGwucGFyc2UodCkpIDogbiA9IHt9LCBuIH0sIGguZ2V0Um9vdFVybCA9IGZ1bmN0aW9uICgpIHsgdmFyIGUgPSByLmxvY2F0aW9uLnByb3RvY29sICsgXCIvL1wiICsgKHIubG9jYXRpb24uaG9zdG5hbWUgfHwgci5sb2NhdGlvbi5ob3N0KTsgaWYgKHIubG9jYXRpb24ucG9ydCB8fCAhMSkgZSArPSBcIjpcIiArIHIubG9jYXRpb24ucG9ydDsgcmV0dXJuIGUgKz0gXCIvXCIsIGUgfSwgaC5nZXRCYXNlSHJlZiA9IGZ1bmN0aW9uICgpIHsgdmFyIGUgPSByLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYmFzZVwiKSwgdCA9IG51bGwsIG4gPSBcIlwiOyByZXR1cm4gZS5sZW5ndGggPT09IDEgJiYgKHQgPSBlWzBdLCBuID0gdC5ocmVmLnJlcGxhY2UoL1teXFwvXSskLywgXCJcIikpLCBuID0gbi5yZXBsYWNlKC9cXC8rJC8sIFwiXCIpLCBuICYmIChuICs9IFwiL1wiKSwgbiB9LCBoLmdldEJhc2VVcmwgPSBmdW5jdGlvbiAoKSB7IHZhciBlID0gaC5nZXRCYXNlSHJlZigpIHx8IGguZ2V0QmFzZVBhZ2VVcmwoKSB8fCBoLmdldFJvb3RVcmwoKTsgcmV0dXJuIGUgfSwgaC5nZXRQYWdlVXJsID0gZnVuY3Rpb24gKCkgeyB2YXIgZSA9IGguZ2V0U3RhdGUoITEsICExKSwgdCA9IChlIHx8IHt9KS51cmwgfHwgaC5nZXRMb2NhdGlvbkhyZWYoKSwgbjsgcmV0dXJuIG4gPSB0LnJlcGxhY2UoL1xcLyskLywgXCJcIikucmVwbGFjZSgvW15cXC9dKyQvLCBmdW5jdGlvbiAoZSwgdCwgbikgeyByZXR1cm4gL1xcLi8udGVzdChlKSA/IGUgOiBlICsgXCIvXCIgfSksIG4gfSwgaC5nZXRCYXNlUGFnZVVybCA9IGZ1bmN0aW9uICgpIHsgdmFyIGUgPSBoLmdldExvY2F0aW9uSHJlZigpLnJlcGxhY2UoL1sjXFw/XS4qLywgXCJcIikucmVwbGFjZSgvW15cXC9dKyQvLCBmdW5jdGlvbiAoZSwgdCwgbikgeyByZXR1cm4gL1teXFwvXSQvLnRlc3QoZSkgPyBcIlwiIDogZSB9KS5yZXBsYWNlKC9cXC8rJC8sIFwiXCIpICsgXCIvXCI7IHJldHVybiBlIH0sIGguZ2V0RnVsbFVybCA9IGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuID0gZSwgciA9IGUuc3Vic3RyaW5nKDAsIDEpOyByZXR1cm4gdCA9IHR5cGVvZiB0ID09IFwidW5kZWZpbmVkXCIgPyAhMCA6IHQsIC9bYS16XStcXDpcXC9cXC8vLnRlc3QoZSkgfHwgKHIgPT09IFwiL1wiID8gbiA9IGguZ2V0Um9vdFVybCgpICsgZS5yZXBsYWNlKC9eXFwvKy8sIFwiXCIpIDogciA9PT0gXCIjXCIgPyBuID0gaC5nZXRQYWdlVXJsKCkucmVwbGFjZSgvIy4qLywgXCJcIikgKyBlIDogciA9PT0gXCI/XCIgPyBuID0gaC5nZXRQYWdlVXJsKCkucmVwbGFjZSgvW1xcPyNdLiovLCBcIlwiKSArIGUgOiB0ID8gbiA9IGguZ2V0QmFzZVVybCgpICsgZS5yZXBsYWNlKC9eKFxcLlxcLykrLywgXCJcIikgOiBuID0gaC5nZXRCYXNlUGFnZVVybCgpICsgZS5yZXBsYWNlKC9eKFxcLlxcLykrLywgXCJcIikpLCBuLnJlcGxhY2UoL1xcIyQvLCBcIlwiKSB9LCBoLmdldFNob3J0VXJsID0gZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSBlLCBuID0gaC5nZXRCYXNlVXJsKCksIHIgPSBoLmdldFJvb3RVcmwoKTsgcmV0dXJuIGguZW11bGF0ZWQucHVzaFN0YXRlICYmICh0ID0gdC5yZXBsYWNlKG4sIFwiXCIpKSwgdCA9IHQucmVwbGFjZShyLCBcIi9cIiksIGguaXNUcmFkaXRpb25hbEFuY2hvcih0KSAmJiAodCA9IFwiLi9cIiArIHQpLCB0ID0gdC5yZXBsYWNlKC9eKFxcLlxcLykrL2csIFwiLi9cIikucmVwbGFjZSgvXFwjJC8sIFwiXCIpLCB0IH0sIGguZ2V0TG9jYXRpb25IcmVmID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGUgPSBlIHx8IHIsIGUuVVJMID09PSBlLmxvY2F0aW9uLmhyZWYgPyBlLmxvY2F0aW9uLmhyZWYgOiBlLmxvY2F0aW9uLmhyZWYgPT09IGRlY29kZVVSSUNvbXBvbmVudChlLlVSTCkgPyBlLlVSTCA6IGUubG9jYXRpb24uaGFzaCAmJiBkZWNvZGVVUklDb21wb25lbnQoZS5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoL15bXiNdKy8sIFwiXCIpKSA9PT0gZS5sb2NhdGlvbi5oYXNoID8gZS5sb2NhdGlvbi5ocmVmIDogZS5VUkwuaW5kZXhPZihcIiNcIikgPT0gLTEgJiYgZS5sb2NhdGlvbi5ocmVmLmluZGV4T2YoXCIjXCIpICE9IC0xID8gZS5sb2NhdGlvbi5ocmVmIDogZS5VUkwgfHwgZS5sb2NhdGlvbi5ocmVmIH0sIGguc3RvcmUgPSB7fSwgaC5pZFRvU3RhdGUgPSBoLmlkVG9TdGF0ZSB8fCB7fSwgaC5zdGF0ZVRvSWQgPSBoLnN0YXRlVG9JZCB8fCB7fSwgaC51cmxUb0lkID0gaC51cmxUb0lkIHx8IHt9LCBoLnN0b3JlZFN0YXRlcyA9IGguc3RvcmVkU3RhdGVzIHx8IFtdLCBoLnNhdmVkU3RhdGVzID0gaC5zYXZlZFN0YXRlcyB8fCBbXSwgaC5ub3JtYWxpemVTdG9yZSA9IGZ1bmN0aW9uICgpIHsgaC5zdG9yZS5pZFRvU3RhdGUgPSBoLnN0b3JlLmlkVG9TdGF0ZSB8fCB7fSwgaC5zdG9yZS51cmxUb0lkID0gaC5zdG9yZS51cmxUb0lkIHx8IHt9LCBoLnN0b3JlLnN0YXRlVG9JZCA9IGguc3RvcmUuc3RhdGVUb0lkIHx8IHt9IH0sIGguZ2V0U3RhdGUgPSBmdW5jdGlvbiAoZSwgdCkgeyB0eXBlb2YgZSA9PSBcInVuZGVmaW5lZFwiICYmIChlID0gITApLCB0eXBlb2YgdCA9PSBcInVuZGVmaW5lZFwiICYmICh0ID0gITApOyB2YXIgbiA9IGguZ2V0TGFzdFNhdmVkU3RhdGUoKTsgcmV0dXJuICFuICYmIHQgJiYgKG4gPSBoLmNyZWF0ZVN0YXRlT2JqZWN0KCkpLCBlICYmIChuID0gaC5jbG9uZU9iamVjdChuKSwgbi51cmwgPSBuLmNsZWFuVXJsIHx8IG4udXJsKSwgbiB9LCBoLmdldElkQnlTdGF0ZSA9IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gaC5leHRyYWN0SWQoZS51cmwpLCBuOyBpZiAoIXQpIHsgbiA9IGguZ2V0U3RhdGVTdHJpbmcoZSk7IGlmICh0eXBlb2YgaC5zdGF0ZVRvSWRbbl0gIT0gXCJ1bmRlZmluZWRcIikgdCA9IGguc3RhdGVUb0lkW25dOyBlbHNlIGlmICh0eXBlb2YgaC5zdG9yZS5zdGF0ZVRvSWRbbl0gIT0gXCJ1bmRlZmluZWRcIikgdCA9IGguc3RvcmUuc3RhdGVUb0lkW25dOyBlbHNlIHsgZm9yICg7IDspIHsgdCA9IChuZXcgRGF0ZSkuZ2V0VGltZSgpICsgU3RyaW5nKE1hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xcRC9nLCBcIlwiKTsgaWYgKHR5cGVvZiBoLmlkVG9TdGF0ZVt0XSA9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBoLnN0b3JlLmlkVG9TdGF0ZVt0XSA9PSBcInVuZGVmaW5lZFwiKSBicmVhayB9IGguc3RhdGVUb0lkW25dID0gdCwgaC5pZFRvU3RhdGVbdF0gPSBlIH0gfSByZXR1cm4gdCB9LCBoLm5vcm1hbGl6ZVN0YXRlID0gZnVuY3Rpb24gKGUpIHsgdmFyIHQsIG47IGlmICghZSB8fCB0eXBlb2YgZSAhPSBcIm9iamVjdFwiKSBlID0ge307IGlmICh0eXBlb2YgZS5ub3JtYWxpemVkICE9IFwidW5kZWZpbmVkXCIpIHJldHVybiBlOyBpZiAoIWUuZGF0YSB8fCB0eXBlb2YgZS5kYXRhICE9IFwib2JqZWN0XCIpIGUuZGF0YSA9IHt9OyByZXR1cm4gdCA9IHt9LCB0Lm5vcm1hbGl6ZWQgPSAhMCwgdC50aXRsZSA9IGUudGl0bGUgfHwgXCJcIiwgdC51cmwgPSBoLmdldEZ1bGxVcmwoZS51cmwgPyBlLnVybCA6IGguZ2V0TG9jYXRpb25IcmVmKCkpLCB0Lmhhc2ggPSBoLmdldFNob3J0VXJsKHQudXJsKSwgdC5kYXRhID0gaC5jbG9uZU9iamVjdChlLmRhdGEpLCB0LmlkID0gaC5nZXRJZEJ5U3RhdGUodCksIHQuY2xlYW5VcmwgPSB0LnVybC5yZXBsYWNlKC9cXD8/XFwmX3N1aWQuKi8sIFwiXCIpLCB0LnVybCA9IHQuY2xlYW5VcmwsIG4gPSAhaC5pc0VtcHR5T2JqZWN0KHQuZGF0YSksICh0LnRpdGxlIHx8IG4pICYmIGgub3B0aW9ucy5kaXNhYmxlU3VpZCAhPT0gITAgJiYgKHQuaGFzaCA9IGguZ2V0U2hvcnRVcmwodC51cmwpLnJlcGxhY2UoL1xcPz9cXCZfc3VpZC4qLywgXCJcIiksIC9cXD8vLnRlc3QodC5oYXNoKSB8fCAodC5oYXNoICs9IFwiP1wiKSwgdC5oYXNoICs9IFwiJl9zdWlkPVwiICsgdC5pZCksIHQuaGFzaGVkVXJsID0gaC5nZXRGdWxsVXJsKHQuaGFzaCksIChoLmVtdWxhdGVkLnB1c2hTdGF0ZSB8fCBoLmJ1Z3Muc2FmYXJpUG9sbCkgJiYgaC5oYXNVcmxEdXBsaWNhdGUodCkgJiYgKHQudXJsID0gdC5oYXNoZWRVcmwpLCB0IH0sIGguY3JlYXRlU3RhdGVPYmplY3QgPSBmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgciA9IHsgZGF0YTogZSwgdGl0bGU6IHQsIHVybDogbiB9OyByZXR1cm4gciA9IGgubm9ybWFsaXplU3RhdGUociksIHIgfSwgaC5nZXRTdGF0ZUJ5SWQgPSBmdW5jdGlvbiAoZSkgeyBlID0gU3RyaW5nKGUpOyB2YXIgbiA9IGguaWRUb1N0YXRlW2VdIHx8IGguc3RvcmUuaWRUb1N0YXRlW2VdIHx8IHQ7IHJldHVybiBuIH0sIGguZ2V0U3RhdGVTdHJpbmcgPSBmdW5jdGlvbiAoZSkgeyB2YXIgdCwgbiwgcjsgcmV0dXJuIHQgPSBoLm5vcm1hbGl6ZVN0YXRlKGUpLCBuID0geyBkYXRhOiB0LmRhdGEsIHRpdGxlOiBlLnRpdGxlLCB1cmw6IGUudXJsIH0sIHIgPSBsLnN0cmluZ2lmeShuKSwgciB9LCBoLmdldFN0YXRlSWQgPSBmdW5jdGlvbiAoZSkgeyB2YXIgdCwgbjsgcmV0dXJuIHQgPSBoLm5vcm1hbGl6ZVN0YXRlKGUpLCBuID0gdC5pZCwgbiB9LCBoLmdldEhhc2hCeVN0YXRlID0gZnVuY3Rpb24gKGUpIHsgdmFyIHQsIG47IHJldHVybiB0ID0gaC5ub3JtYWxpemVTdGF0ZShlKSwgbiA9IHQuaGFzaCwgbiB9LCBoLmV4dHJhY3RJZCA9IGZ1bmN0aW9uIChlKSB7IHZhciB0LCBuLCByLCBpOyByZXR1cm4gZS5pbmRleE9mKFwiI1wiKSAhPSAtMSA/IGkgPSBlLnNwbGl0KFwiI1wiKVswXSA6IGkgPSBlLCBuID0gLyguKilcXCZfc3VpZD0oWzAtOV0rKSQvLmV4ZWMoaSksIHIgPSBuID8gblsxXSB8fCBlIDogZSwgdCA9IG4gPyBTdHJpbmcoblsyXSB8fCBcIlwiKSA6IFwiXCIsIHQgfHwgITEgfSwgaC5pc1RyYWRpdGlvbmFsQW5jaG9yID0gZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSAhL1tcXC9cXD9cXC5dLy50ZXN0KGUpOyByZXR1cm4gdCB9LCBoLmV4dHJhY3RTdGF0ZSA9IGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuID0gbnVsbCwgciwgaTsgcmV0dXJuIHQgPSB0IHx8ICExLCByID0gaC5leHRyYWN0SWQoZSksIHIgJiYgKG4gPSBoLmdldFN0YXRlQnlJZChyKSksIG4gfHwgKGkgPSBoLmdldEZ1bGxVcmwoZSksIHIgPSBoLmdldElkQnlVcmwoaSkgfHwgITEsIHIgJiYgKG4gPSBoLmdldFN0YXRlQnlJZChyKSksICFuICYmIHQgJiYgIWguaXNUcmFkaXRpb25hbEFuY2hvcihlKSAmJiAobiA9IGguY3JlYXRlU3RhdGVPYmplY3QobnVsbCwgbnVsbCwgaSkpKSwgbiB9LCBoLmdldElkQnlVcmwgPSBmdW5jdGlvbiAoZSkgeyB2YXIgbiA9IGgudXJsVG9JZFtlXSB8fCBoLnN0b3JlLnVybFRvSWRbZV0gfHwgdDsgcmV0dXJuIG4gfSwgaC5nZXRMYXN0U2F2ZWRTdGF0ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGguc2F2ZWRTdGF0ZXNbaC5zYXZlZFN0YXRlcy5sZW5ndGggLSAxXSB8fCB0IH0sIGguZ2V0TGFzdFN0b3JlZFN0YXRlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gaC5zdG9yZWRTdGF0ZXNbaC5zdG9yZWRTdGF0ZXMubGVuZ3RoIC0gMV0gfHwgdCB9LCBoLmhhc1VybER1cGxpY2F0ZSA9IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gITEsIG47IHJldHVybiBuID0gaC5leHRyYWN0U3RhdGUoZS51cmwpLCB0ID0gbiAmJiBuLmlkICE9PSBlLmlkLCB0IH0sIGguc3RvcmVTdGF0ZSA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiBoLnVybFRvSWRbZS51cmxdID0gZS5pZCwgaC5zdG9yZWRTdGF0ZXMucHVzaChoLmNsb25lT2JqZWN0KGUpKSwgZSB9LCBoLmlzTGFzdFNhdmVkU3RhdGUgPSBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9ICExLCBuLCByLCBpOyByZXR1cm4gaC5zYXZlZFN0YXRlcy5sZW5ndGggJiYgKG4gPSBlLmlkLCByID0gaC5nZXRMYXN0U2F2ZWRTdGF0ZSgpLCBpID0gci5pZCwgdCA9IG4gPT09IGkpLCB0IH0sIGguc2F2ZVN0YXRlID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGguaXNMYXN0U2F2ZWRTdGF0ZShlKSA/ICExIDogKGguc2F2ZWRTdGF0ZXMucHVzaChoLmNsb25lT2JqZWN0KGUpKSwgITApIH0sIGguZ2V0U3RhdGVCeUluZGV4ID0gZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSBudWxsOyByZXR1cm4gdHlwZW9mIGUgPT0gXCJ1bmRlZmluZWRcIiA/IHQgPSBoLnNhdmVkU3RhdGVzW2guc2F2ZWRTdGF0ZXMubGVuZ3RoIC0gMV0gOiBlIDwgMCA/IHQgPSBoLnNhdmVkU3RhdGVzW2guc2F2ZWRTdGF0ZXMubGVuZ3RoICsgZV0gOiB0ID0gaC5zYXZlZFN0YXRlc1tlXSwgdCB9LCBoLmdldEN1cnJlbnRJbmRleCA9IGZ1bmN0aW9uICgpIHsgdmFyIGUgPSBudWxsOyByZXR1cm4gaC5zYXZlZFN0YXRlcy5sZW5ndGggPCAxID8gZSA9IDAgOiBlID0gaC5zYXZlZFN0YXRlcy5sZW5ndGggLSAxLCBlIH0sIGguZ2V0SGFzaCA9IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gaC5nZXRMb2NhdGlvbkhyZWYoZSksIG47IHJldHVybiBuID0gaC5nZXRIYXNoQnlVcmwodCksIG4gfSwgaC51bmVzY2FwZUhhc2ggPSBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IGgubm9ybWFsaXplSGFzaChlKTsgcmV0dXJuIHQgPSBkZWNvZGVVUklDb21wb25lbnQodCksIHQgfSwgaC5ub3JtYWxpemVIYXNoID0gZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSBlLnJlcGxhY2UoL1teI10qIy8sIFwiXCIpLnJlcGxhY2UoLyMuKi8sIFwiXCIpOyByZXR1cm4gdCB9LCBoLnNldEhhc2ggPSBmdW5jdGlvbiAoZSwgdCkgeyB2YXIgbiwgaTsgcmV0dXJuIHQgIT09ICExICYmIGguYnVzeSgpID8gKGgucHVzaFF1ZXVlKHsgc2NvcGU6IGgsIGNhbGxiYWNrOiBoLnNldEhhc2gsIGFyZ3M6IGFyZ3VtZW50cywgcXVldWU6IHQgfSksICExKSA6IChoLmJ1c3koITApLCBuID0gaC5leHRyYWN0U3RhdGUoZSwgITApLCBuICYmICFoLmVtdWxhdGVkLnB1c2hTdGF0ZSA/IGgucHVzaFN0YXRlKG4uZGF0YSwgbi50aXRsZSwgbi51cmwsICExKSA6IGguZ2V0SGFzaCgpICE9PSBlICYmIChoLmJ1Z3Muc2V0SGFzaCA/IChpID0gaC5nZXRQYWdlVXJsKCksIGgucHVzaFN0YXRlKG51bGwsIG51bGwsIGkgKyBcIiNcIiArIGUsICExKSkgOiByLmxvY2F0aW9uLmhhc2ggPSBlKSwgaCkgfSwgaC5lc2NhcGVIYXNoID0gZnVuY3Rpb24gKHQpIHsgdmFyIG4gPSBoLm5vcm1hbGl6ZUhhc2godCk7IHJldHVybiBuID0gZS5lbmNvZGVVUklDb21wb25lbnQobiksIGguYnVncy5oYXNoRXNjYXBlIHx8IChuID0gbi5yZXBsYWNlKC9cXCUyMS9nLCBcIiFcIikucmVwbGFjZSgvXFwlMjYvZywgXCImXCIpLnJlcGxhY2UoL1xcJTNEL2csIFwiPVwiKS5yZXBsYWNlKC9cXCUzRi9nLCBcIj9cIikpLCBuIH0sIGguZ2V0SGFzaEJ5VXJsID0gZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSBTdHJpbmcoZSkucmVwbGFjZSgvKFteI10qKSM/KFteI10qKSM/KC4qKS8sIFwiJDJcIik7IHJldHVybiB0ID0gaC51bmVzY2FwZUhhc2godCksIHQgfSwgaC5zZXRUaXRsZSA9IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gZS50aXRsZSwgbjsgdCB8fCAobiA9IGguZ2V0U3RhdGVCeUluZGV4KDApLCBuICYmIG4udXJsID09PSBlLnVybCAmJiAodCA9IG4udGl0bGUgfHwgaC5vcHRpb25zLmluaXRpYWxUaXRsZSkpOyB0cnkgeyByLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGl0bGVcIilbMF0uaW5uZXJIVE1MID0gdC5yZXBsYWNlKFwiPFwiLCBcIiZsdDtcIikucmVwbGFjZShcIj5cIiwgXCImZ3Q7XCIpLnJlcGxhY2UoXCIgJiBcIiwgXCIgJmFtcDsgXCIpIH0gY2F0Y2ggKGkpIHsgfSByZXR1cm4gci50aXRsZSA9IHQsIGggfSwgaC5xdWV1ZXMgPSBbXSwgaC5idXN5ID0gZnVuY3Rpb24gKGUpIHsgdHlwZW9mIGUgIT0gXCJ1bmRlZmluZWRcIiA/IGguYnVzeS5mbGFnID0gZSA6IHR5cGVvZiBoLmJ1c3kuZmxhZyA9PSBcInVuZGVmaW5lZFwiICYmIChoLmJ1c3kuZmxhZyA9ICExKTsgaWYgKCFoLmJ1c3kuZmxhZykgeyB1KGguYnVzeS50aW1lb3V0KTsgdmFyIHQgPSBmdW5jdGlvbiAoKSB7IHZhciBlLCBuLCByOyBpZiAoaC5idXN5LmZsYWcpIHJldHVybjsgZm9yIChlID0gaC5xdWV1ZXMubGVuZ3RoIC0gMTsgZSA+PSAwOyAtLWUpIHsgbiA9IGgucXVldWVzW2VdOyBpZiAobi5sZW5ndGggPT09IDApIGNvbnRpbnVlOyByID0gbi5zaGlmdCgpLCBoLmZpcmVRdWV1ZUl0ZW0ociksIGguYnVzeS50aW1lb3V0ID0gbyh0LCBoLm9wdGlvbnMuYnVzeURlbGF5KSB9IH07IGguYnVzeS50aW1lb3V0ID0gbyh0LCBoLm9wdGlvbnMuYnVzeURlbGF5KSB9IHJldHVybiBoLmJ1c3kuZmxhZyB9LCBoLmJ1c3kuZmxhZyA9ICExLCBoLmZpcmVRdWV1ZUl0ZW0gPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZS5jYWxsYmFjay5hcHBseShlLnNjb3BlIHx8IGgsIGUuYXJncyB8fCBbXSkgfSwgaC5wdXNoUXVldWUgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gaC5xdWV1ZXNbZS5xdWV1ZSB8fCAwXSA9IGgucXVldWVzW2UucXVldWUgfHwgMF0gfHwgW10sIGgucXVldWVzW2UucXVldWUgfHwgMF0ucHVzaChlKSwgaCB9LCBoLnF1ZXVlID0gZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIHR5cGVvZiBlID09IFwiZnVuY3Rpb25cIiAmJiAoZSA9IHsgY2FsbGJhY2s6IGUgfSksIHR5cGVvZiB0ICE9IFwidW5kZWZpbmVkXCIgJiYgKGUucXVldWUgPSB0KSwgaC5idXN5KCkgPyBoLnB1c2hRdWV1ZShlKSA6IGguZmlyZVF1ZXVlSXRlbShlKSwgaCB9LCBoLmNsZWFyUXVldWUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBoLmJ1c3kuZmxhZyA9ICExLCBoLnF1ZXVlcyA9IFtdLCBoIH0sIGguc3RhdGVDaGFuZ2VkID0gITEsIGguZG91YmxlQ2hlY2tlciA9ICExLCBoLmRvdWJsZUNoZWNrQ29tcGxldGUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBoLnN0YXRlQ2hhbmdlZCA9ICEwLCBoLmRvdWJsZUNoZWNrQ2xlYXIoKSwgaCB9LCBoLmRvdWJsZUNoZWNrQ2xlYXIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBoLmRvdWJsZUNoZWNrZXIgJiYgKHUoaC5kb3VibGVDaGVja2VyKSwgaC5kb3VibGVDaGVja2VyID0gITEpLCBoIH0sIGguZG91YmxlQ2hlY2sgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gaC5zdGF0ZUNoYW5nZWQgPSAhMSwgaC5kb3VibGVDaGVja0NsZWFyKCksIGguYnVncy5pZURvdWJsZUNoZWNrICYmIChoLmRvdWJsZUNoZWNrZXIgPSBvKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGguZG91YmxlQ2hlY2tDbGVhcigpLCBoLnN0YXRlQ2hhbmdlZCB8fCBlKCksICEwIH0sIGgub3B0aW9ucy5kb3VibGVDaGVja0ludGVydmFsKSksIGggfSwgaC5zYWZhcmlTdGF0ZVBvbGwgPSBmdW5jdGlvbiAoKSB7IHZhciB0ID0gaC5leHRyYWN0U3RhdGUoaC5nZXRMb2NhdGlvbkhyZWYoKSksIG47IGlmICghaC5pc0xhc3RTYXZlZFN0YXRlKHQpKSByZXR1cm4gbiA9IHQsIG4gfHwgKG4gPSBoLmNyZWF0ZVN0YXRlT2JqZWN0KCkpLCBoLkFkYXB0ZXIudHJpZ2dlcihlLCBcInBvcHN0YXRlXCIpLCBoOyByZXR1cm4gfSwgaC5iYWNrID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGUgIT09ICExICYmIGguYnVzeSgpID8gKGgucHVzaFF1ZXVlKHsgc2NvcGU6IGgsIGNhbGxiYWNrOiBoLmJhY2ssIGFyZ3M6IGFyZ3VtZW50cywgcXVldWU6IGUgfSksICExKSA6IChoLmJ1c3koITApLCBoLmRvdWJsZUNoZWNrKGZ1bmN0aW9uICgpIHsgaC5iYWNrKCExKSB9KSwgcC5nbygtMSksICEwKSB9LCBoLmZvcndhcmQgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZSAhPT0gITEgJiYgaC5idXN5KCkgPyAoaC5wdXNoUXVldWUoeyBzY29wZTogaCwgY2FsbGJhY2s6IGguZm9yd2FyZCwgYXJnczogYXJndW1lbnRzLCBxdWV1ZTogZSB9KSwgITEpIDogKGguYnVzeSghMCksIGguZG91YmxlQ2hlY2soZnVuY3Rpb24gKCkgeyBoLmZvcndhcmQoITEpIH0pLCBwLmdvKDEpLCAhMCkgfSwgaC5nbyA9IGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuOyBpZiAoZSA+IDApIGZvciAobiA9IDE7IG4gPD0gZTsgKytuKSBoLmZvcndhcmQodCk7IGVsc2UgeyBpZiAoIShlIDwgMCkpIHRocm93IG5ldyBFcnJvcihcIkhpc3RvcnkuZ286IEhpc3RvcnkuZ28gcmVxdWlyZXMgYSBwb3NpdGl2ZSBvciBuZWdhdGl2ZSBpbnRlZ2VyIHBhc3NlZC5cIik7IGZvciAobiA9IC0xOyBuID49IGU7IC0tbikgaC5iYWNrKHQpIH0gcmV0dXJuIGggfTsgaWYgKGguZW11bGF0ZWQucHVzaFN0YXRlKSB7IHZhciB2ID0gZnVuY3Rpb24gKCkgeyB9OyBoLnB1c2hTdGF0ZSA9IGgucHVzaFN0YXRlIHx8IHYsIGgucmVwbGFjZVN0YXRlID0gaC5yZXBsYWNlU3RhdGUgfHwgdiB9IGVsc2UgaC5vblBvcFN0YXRlID0gZnVuY3Rpb24gKHQsIG4pIHsgdmFyIHIgPSAhMSwgaSA9ICExLCBzLCBvOyByZXR1cm4gaC5kb3VibGVDaGVja0NvbXBsZXRlKCksIHMgPSBoLmdldEhhc2goKSwgcyA/IChvID0gaC5leHRyYWN0U3RhdGUocyB8fCBoLmdldExvY2F0aW9uSHJlZigpLCAhMCksIG8gPyBoLnJlcGxhY2VTdGF0ZShvLmRhdGEsIG8udGl0bGUsIG8udXJsLCAhMSkgOiAoaC5BZGFwdGVyLnRyaWdnZXIoZSwgXCJhbmNob3JjaGFuZ2VcIiksIGguYnVzeSghMSkpLCBoLmV4cGVjdGVkU3RhdGVJZCA9ICExLCAhMSkgOiAociA9IGguQWRhcHRlci5leHRyYWN0RXZlbnREYXRhKFwic3RhdGVcIiwgdCwgbikgfHwgITEsIHIgPyBpID0gaC5nZXRTdGF0ZUJ5SWQocikgOiBoLmV4cGVjdGVkU3RhdGVJZCA/IGkgPSBoLmdldFN0YXRlQnlJZChoLmV4cGVjdGVkU3RhdGVJZCkgOiBpID0gaC5leHRyYWN0U3RhdGUoaC5nZXRMb2NhdGlvbkhyZWYoKSksIGkgfHwgKGkgPSBoLmNyZWF0ZVN0YXRlT2JqZWN0KG51bGwsIG51bGwsIGguZ2V0TG9jYXRpb25IcmVmKCkpKSwgaC5leHBlY3RlZFN0YXRlSWQgPSAhMSwgaC5pc0xhc3RTYXZlZFN0YXRlKGkpID8gKGguYnVzeSghMSksICExKSA6IChoLnN0b3JlU3RhdGUoaSksIGguc2F2ZVN0YXRlKGkpLCBoLnNldFRpdGxlKGkpLCBoLkFkYXB0ZXIudHJpZ2dlcihlLCBcInN0YXRlY2hhbmdlXCIpLCBoLmJ1c3koITEpLCAhMCkpIH0sIGguQWRhcHRlci5iaW5kKGUsIFwicG9wc3RhdGVcIiwgaC5vblBvcFN0YXRlKSwgaC5wdXNoU3RhdGUgPSBmdW5jdGlvbiAodCwgbiwgciwgaSkgeyBpZiAoaC5nZXRIYXNoQnlVcmwocikgJiYgaC5lbXVsYXRlZC5wdXNoU3RhdGUpIHRocm93IG5ldyBFcnJvcihcIkhpc3RvcnkuanMgZG9lcyBub3Qgc3VwcG9ydCBzdGF0ZXMgd2l0aCBmcmFnZW1lbnQtaWRlbnRpZmllcnMgKGhhc2hlcy9hbmNob3JzKS5cIik7IGlmIChpICE9PSAhMSAmJiBoLmJ1c3koKSkgcmV0dXJuIGgucHVzaFF1ZXVlKHsgc2NvcGU6IGgsIGNhbGxiYWNrOiBoLnB1c2hTdGF0ZSwgYXJnczogYXJndW1lbnRzLCBxdWV1ZTogaSB9KSwgITE7IGguYnVzeSghMCk7IHZhciBzID0gaC5jcmVhdGVTdGF0ZU9iamVjdCh0LCBuLCByKTsgcmV0dXJuIGguaXNMYXN0U2F2ZWRTdGF0ZShzKSA/IGguYnVzeSghMSkgOiAoaC5zdG9yZVN0YXRlKHMpLCBoLmV4cGVjdGVkU3RhdGVJZCA9IHMuaWQsIHAucHVzaFN0YXRlKHMuaWQsIHMudGl0bGUsIHMudXJsKSwgaC5BZGFwdGVyLnRyaWdnZXIoZSwgXCJwb3BzdGF0ZVwiKSksICEwIH0sIGgucmVwbGFjZVN0YXRlID0gZnVuY3Rpb24gKHQsIG4sIHIsIGkpIHsgaWYgKGguZ2V0SGFzaEJ5VXJsKHIpICYmIGguZW11bGF0ZWQucHVzaFN0YXRlKSB0aHJvdyBuZXcgRXJyb3IoXCJIaXN0b3J5LmpzIGRvZXMgbm90IHN1cHBvcnQgc3RhdGVzIHdpdGggZnJhZ2VtZW50LWlkZW50aWZpZXJzIChoYXNoZXMvYW5jaG9ycykuXCIpOyBpZiAoaSAhPT0gITEgJiYgaC5idXN5KCkpIHJldHVybiBoLnB1c2hRdWV1ZSh7IHNjb3BlOiBoLCBjYWxsYmFjazogaC5yZXBsYWNlU3RhdGUsIGFyZ3M6IGFyZ3VtZW50cywgcXVldWU6IGkgfSksICExOyBoLmJ1c3koITApOyB2YXIgcyA9IGguY3JlYXRlU3RhdGVPYmplY3QodCwgbiwgcik7IHJldHVybiBoLmlzTGFzdFNhdmVkU3RhdGUocykgPyBoLmJ1c3koITEpIDogKGguc3RvcmVTdGF0ZShzKSwgaC5leHBlY3RlZFN0YXRlSWQgPSBzLmlkLCBwLnJlcGxhY2VTdGF0ZShzLmlkLCBzLnRpdGxlLCBzLnVybCksIGguQWRhcHRlci50cmlnZ2VyKGUsIFwicG9wc3RhdGVcIikpLCAhMCB9OyBpZiAocykgeyB0cnkgeyBoLnN0b3JlID0gbC5wYXJzZShzLmdldEl0ZW0oXCJIaXN0b3J5LnN0b3JlXCIpKSB8fCB7fSB9IGNhdGNoIChtKSB7IGguc3RvcmUgPSB7fSB9IGgubm9ybWFsaXplU3RvcmUoKSB9IGVsc2UgaC5zdG9yZSA9IHt9LCBoLm5vcm1hbGl6ZVN0b3JlKCk7IGguQWRhcHRlci5iaW5kKGUsIFwidW5sb2FkXCIsIGguY2xlYXJBbGxJbnRlcnZhbHMpLCBoLnNhdmVTdGF0ZShoLnN0b3JlU3RhdGUoaC5leHRyYWN0U3RhdGUoaC5nZXRMb2NhdGlvbkhyZWYoKSwgITApKSksIHMgJiYgKGgub25VbmxvYWQgPSBmdW5jdGlvbiAoKSB7IHZhciBlLCB0LCBuOyB0cnkgeyBlID0gbC5wYXJzZShzLmdldEl0ZW0oXCJIaXN0b3J5LnN0b3JlXCIpKSB8fCB7fSB9IGNhdGNoIChyKSB7IGUgPSB7fSB9IGUuaWRUb1N0YXRlID0gZS5pZFRvU3RhdGUgfHwge30sIGUudXJsVG9JZCA9IGUudXJsVG9JZCB8fCB7fSwgZS5zdGF0ZVRvSWQgPSBlLnN0YXRlVG9JZCB8fCB7fTsgZm9yICh0IGluIGguaWRUb1N0YXRlKSB7IGlmICghaC5pZFRvU3RhdGUuaGFzT3duUHJvcGVydHkodCkpIGNvbnRpbnVlOyBlLmlkVG9TdGF0ZVt0XSA9IGguaWRUb1N0YXRlW3RdIH0gZm9yICh0IGluIGgudXJsVG9JZCkgeyBpZiAoIWgudXJsVG9JZC5oYXNPd25Qcm9wZXJ0eSh0KSkgY29udGludWU7IGUudXJsVG9JZFt0XSA9IGgudXJsVG9JZFt0XSB9IGZvciAodCBpbiBoLnN0YXRlVG9JZCkgeyBpZiAoIWguc3RhdGVUb0lkLmhhc093blByb3BlcnR5KHQpKSBjb250aW51ZTsgZS5zdGF0ZVRvSWRbdF0gPSBoLnN0YXRlVG9JZFt0XSB9IGguc3RvcmUgPSBlLCBoLm5vcm1hbGl6ZVN0b3JlKCksIG4gPSBsLnN0cmluZ2lmeShlKTsgdHJ5IHsgcy5zZXRJdGVtKFwiSGlzdG9yeS5zdG9yZVwiLCBuKSB9IGNhdGNoIChpKSB7IGlmIChpLmNvZGUgIT09IERPTUV4Y2VwdGlvbi5RVU9UQV9FWENFRURFRF9FUlIpIHRocm93IGk7IHMubGVuZ3RoICYmIChzLnJlbW92ZUl0ZW0oXCJIaXN0b3J5LnN0b3JlXCIpLCBzLnNldEl0ZW0oXCJIaXN0b3J5LnN0b3JlXCIsIG4pKSB9IH0sIGguaW50ZXJ2YWxMaXN0LnB1c2goYShoLm9uVW5sb2FkLCBoLm9wdGlvbnMuc3RvcmVJbnRlcnZhbCkpLCBoLkFkYXB0ZXIuYmluZChlLCBcImJlZm9yZXVubG9hZFwiLCBoLm9uVW5sb2FkKSwgaC5BZGFwdGVyLmJpbmQoZSwgXCJ1bmxvYWRcIiwgaC5vblVubG9hZCkpOyBpZiAoIWguZW11bGF0ZWQucHVzaFN0YXRlKSB7IGguYnVncy5zYWZhcmlQb2xsICYmIGguaW50ZXJ2YWxMaXN0LnB1c2goYShoLnNhZmFyaVN0YXRlUG9sbCwgaC5vcHRpb25zLnNhZmFyaVBvbGxJbnRlcnZhbCkpOyBpZiAoaS52ZW5kb3IgPT09IFwiQXBwbGUgQ29tcHV0ZXIsIEluYy5cIiB8fCAoaS5hcHBDb2RlTmFtZSB8fCBcIlwiKSA9PT0gXCJNb3ppbGxhXCIpIGguQWRhcHRlci5iaW5kKGUsIFwiaGFzaGNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7IGguQWRhcHRlci50cmlnZ2VyKGUsIFwicG9wc3RhdGVcIikgfSksIGguZ2V0SGFzaCgpICYmIGguQWRhcHRlci5vbkRvbUxvYWQoZnVuY3Rpb24gKCkgeyBoLkFkYXB0ZXIudHJpZ2dlcihlLCBcImhhc2hjaGFuZ2VcIikgfSkgfSB9LCAoIWgub3B0aW9ucyB8fCAhaC5vcHRpb25zLmRlbGF5SW5pdCkgJiYgaC5pbml0KCkgfSh3aW5kb3cpIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
