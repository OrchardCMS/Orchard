!function(a){a.extend(a.calendars.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),a.calendars.local=a.calendars.regionalOptions[""],a.extend(a.calendars.cdate.prototype,{formatDate:function(a){return this._calendar.formatDate(a||"",this)}}),a.extend(a.calendars.baseCalendar.prototype,{UNIX_EPOCH:a.calendars.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:a.calendars.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(e,t,r){if("string"!=typeof e&&(r=t,t=e,e=""),!t)return"";if(t.calendar()!==this)throw a.calendars.local.invalidFormat||a.calendars.regionalOptions[""].invalidFormat;e=e||this.local.dateFormat,r=r||{};for(var n=r.dayNamesShort||this.local.dayNamesShort,o=r.dayNames||this.local.dayNames,s=r.monthNamesShort||this.local.monthNamesShort,i=r.monthNames||this.local.monthNames,c=(r.calculateWeek||this.local.calculateWeek,function(a,t){for(var r=1;m+r<e.length&&e.charAt(m+r)===a;)r++;return m+=r-1,Math.floor(r/(t||1))>1}),l=function(a,e,t,r){var n=""+e;if(c(a,r))for(;n.length<t;)n="0"+n;return n},d=function(a,e,t,r){return c(a)?r[e]:t[e]},h="",y=!1,m=0;m<e.length;m++)if(y)"'"!==e.charAt(m)||c("'")?h+=e.charAt(m):y=!1;else switch(e.charAt(m)){case"d":h+=l("d",t.day(),2);break;case"D":h+=d("D",t.dayOfWeek(),n,o);break;case"o":h+=l("o",t.dayOfYear(),3);break;case"w":h+=l("w",t.weekOfYear(),2);break;case"m":h+=l("m",t.month(),2);break;case"M":h+=d("M",t.month()-this.minMonth,s,i);break;case"y":h+=c("y",2)?t.year():(t.year()%100<10?"0":"")+t.year()%100;break;case"Y":c("Y",2),h+=t.formatYear();break;case"J":h+=t.toJD();break;case"@":h+=(t.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":h+=(t.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":c("'")?h+="'":y=!0;break;default:h+=e.charAt(m)}return h},parseDate:function(e,t,r){if(null==t)throw a.calendars.local.invalidArguments||a.calendars.regionalOptions[""].invalidArguments;if(t="object"==typeof t?t.toString():t+"",""===t)return null;e=e||this.local.dateFormat,r=r||{};var n=r.shortYearCutoff||this.shortYearCutoff;n="string"!=typeof n?n:this.today().year()%100+parseInt(n,10);for(var o=r.dayNamesShort||this.local.dayNamesShort,s=r.dayNames||this.local.dayNames,i=r.monthNamesShort||this.local.monthNamesShort,c=r.monthNames||this.local.monthNames,l=-1,d=-1,h=-1,y=-1,m=-1,u=!1,f=!1,p=function(a,t){for(var r=1;C+r<e.length&&e.charAt(C+r)===a;)r++;return C+=r-1,Math.floor(r/(t||1))>1},D=function(e,r){var n=p(e,r),o=[2,3,n?4:2,n?4:2,10,11,20]["oyYJ@!".indexOf(e)+1],s=new RegExp("^-?\\d{1,"+o+"}"),i=t.substring(A).match(s);if(!i)throw(a.calendars.local.missingNumberAt||a.calendars.regionalOptions[""].missingNumberAt).replace(/\{0\}/,A);return A+=i[0].length,parseInt(i[0],10)},b=this,g=function(e,r,n,o){for(var s=p(e,o)?n:r,i=0;i<s.length;i++)if(t.substr(A,s[i].length).toLowerCase()===s[i].toLowerCase())return A+=s[i].length,i+b.minMonth;throw(a.calendars.local.unknownNameAt||a.calendars.regionalOptions[""].unknownNameAt).replace(/\{0\}/,A)},k=function(){if(t.charAt(A)!==e.charAt(C))throw(a.calendars.local.unexpectedLiteralAt||a.calendars.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,A);A++},A=0,C=0;C<e.length;C++)if(f)"'"!==e.charAt(C)||p("'")?k():f=!1;else switch(e.charAt(C)){case"d":y=D("d");break;case"D":g("D",o,s);break;case"o":m=D("o");break;case"w":D("w");break;case"m":h=D("m");break;case"M":h=g("M",i,c);break;case"y":var N=C;u=!p("y",2),C=N,d=D("y",2);break;case"Y":d=D("Y",2);break;case"J":l=D("J")+.5,"."===t.charAt(A)&&(A++,D("J"));break;case"@":l=D("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":l=D("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":A=t.length;break;case"'":p("'")?k():f=!0;break;default:k()}if(A<t.length)throw a.calendars.local.unexpectedText||a.calendars.regionalOptions[""].unexpectedText;if(-1===d?d=this.today().year():100>d&&u&&(d+=-1===n?1900:this.today().year()-this.today().year()%100-(n>=d?0:100)),m>-1){h=1,y=m;for(var w=this.daysInMonth(d,h);y>w;w=this.daysInMonth(d,h))h++,y-=w}return l>-1?this.fromJD(l):this.newDate(d,h,y)},determineDate:function(a,e,t,r,n){t&&"object"!=typeof t&&(n=r,r=t,t=null),"string"!=typeof r&&(n=r,r="");var o=this,s=function(a){try{return o.parseDate(r,a,n)}catch(e){}a=a.toLowerCase();for(var s=(a.match(/^c/)&&t?t.newDate():null)||o.today(),i=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,c=i.exec(a);c;)s.add(parseInt(c[1],10),c[2]||"d"),c=i.exec(a);return s};return e=e?e.newDate():null,a=null==a?e:"string"==typeof a?s(a):"number"==typeof a?isNaN(a)||a===1/0||a===-(1/0)?e:o.today().add(a,"d"):o.newDate(a)}})}(jQuery);