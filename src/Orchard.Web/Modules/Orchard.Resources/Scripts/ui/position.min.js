!function(t){"function"==typeof define&&define.amd?define(["jquery","./version"],t):t(jQuery)}(function(t){return function(){function i(t,i,o){return[parseFloat(t[0])*(d.test(t[0])?i/100:1),parseFloat(t[1])*(d.test(t[1])?o/100:1)]}function o(i,o){return parseInt(t.css(i,o),10)||0}function e(i){var o=i[0];return 9===o.nodeType?{width:i.width(),height:i.height(),offset:{top:0,left:0}}:t.isWindow(o)?{width:i.width(),height:i.height(),offset:{top:i.scrollTop(),left:i.scrollLeft()}}:o.preventDefault?{width:0,height:0,offset:{top:o.pageY,left:o.pageX}}:{width:i.outerWidth(),height:i.outerHeight(),offset:i.offset()}}var n,l,f=Math.max,s=Math.abs,r=Math.round,h=/left|center|right/,p=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,d=/%$/,g=t.fn.position;l=function(){var i=t("<div>").css("position","absolute").appendTo("body").offset({top:1.5,left:1.5}),o=1.5===i.offset().top;return i.remove(),l=function(){return o},o},t.position={scrollbarWidth:function(){if(void 0!==n)return n;var i,o,e=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),l=e.children()[0];return t("body").append(e),i=l.offsetWidth,e.css("overflow","scroll"),o=l.offsetWidth,i===o&&(o=e[0].clientWidth),e.remove(),n=i-o},getScrollInfo:function(i){var o=i.isWindow||i.isDocument?"":i.element.css("overflow-x"),e=i.isWindow||i.isDocument?"":i.element.css("overflow-y"),n="scroll"===o||"auto"===o&&i.width<i.element[0].scrollWidth,l="scroll"===e||"auto"===e&&i.height<i.element[0].scrollHeight;return{width:l?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(i){var o=t(i||window),e=t.isWindow(o[0]),n=!!o[0]&&9===o[0].nodeType,l=!e&&!n;return{element:o,isWindow:e,isDocument:n,offset:l?t(i).offset():{left:0,top:0},scrollLeft:o.scrollLeft(),scrollTop:o.scrollTop(),width:o.outerWidth(),height:o.outerHeight()}}},t.fn.position=function(n){if(!n||!n.of)return g.apply(this,arguments);n=t.extend({},n);var d,u,m,w,W,v,y=t(n.of),H=t.position.getWithinInfo(n.within),b=t.position.getScrollInfo(H),T=(n.collision||"flip").split(" "),x={};return v=e(y),y[0].preventDefault&&(n.at="left top"),u=v.width,m=v.height,w=v.offset,W=t.extend({},w),t.each(["my","at"],function(){var t,i,o=(n[this]||"").split(" ");1===o.length&&(o=h.test(o[0])?o.concat(["center"]):p.test(o[0])?["center"].concat(o):["center","center"]),o[0]=h.test(o[0])?o[0]:"center",o[1]=p.test(o[1])?o[1]:"center",t=c.exec(o[0]),i=c.exec(o[1]),x[this]=[t?t[0]:0,i?i[0]:0],n[this]=[a.exec(o[0])[0],a.exec(o[1])[0]]}),1===T.length&&(T[1]=T[0]),"right"===n.at[0]?W.left+=u:"center"===n.at[0]&&(W.left+=u/2),"bottom"===n.at[1]?W.top+=m:"center"===n.at[1]&&(W.top+=m/2),d=i(x.at,u,m),W.left+=d[0],W.top+=d[1],this.each(function(){var e,h,p=t(this),c=p.outerWidth(),a=p.outerHeight(),g=o(this,"marginLeft"),v=o(this,"marginTop"),L=c+g+o(this,"marginRight")+b.width,P=a+v+o(this,"marginBottom")+b.height,D=t.extend({},W),I=i(x.my,p.outerWidth(),p.outerHeight());"right"===n.my[0]?D.left-=c:"center"===n.my[0]&&(D.left-=c/2),"bottom"===n.my[1]?D.top-=a:"center"===n.my[1]&&(D.top-=a/2),D.left+=I[0],D.top+=I[1],l()||(D.left=r(D.left),D.top=r(D.top)),e={marginLeft:g,marginTop:v},t.each(["left","top"],function(i,o){t.ui.position[T[i]]&&t.ui.position[T[i]][o](D,{targetWidth:u,targetHeight:m,elemWidth:c,elemHeight:a,collisionPosition:e,collisionWidth:L,collisionHeight:P,offset:[d[0]+I[0],d[1]+I[1]],my:n.my,at:n.at,within:H,elem:p})}),n.using&&(h=function(t){var i=w.left-D.left,o=i+u-c,e=w.top-D.top,l=e+m-a,r={target:{element:y,left:w.left,top:w.top,width:u,height:m},element:{element:p,left:D.left,top:D.top,width:c,height:a},horizontal:0>o?"left":i>0?"right":"center",vertical:0>l?"top":e>0?"bottom":"middle"};c>u&&s(i+o)<u&&(r.horizontal="center"),a>m&&s(e+l)<m&&(r.vertical="middle"),f(s(i),s(o))>f(s(e),s(l))?r.important="horizontal":r.important="vertical",n.using.call(this,t,r)}),p.offset(t.extend(D,{using:h}))})},t.ui.position={fit:{left:function(t,i){var o,e=i.within,n=e.isWindow?e.scrollLeft:e.offset.left,l=e.width,s=t.left-i.collisionPosition.marginLeft,r=n-s,h=s+i.collisionWidth-l-n;i.collisionWidth>l?r>0&&0>=h?(o=t.left+r+i.collisionWidth-l-n,t.left+=r-o):h>0&&0>=r?t.left=n:r>h?t.left=n+l-i.collisionWidth:t.left=n:r>0?t.left+=r:h>0?t.left-=h:t.left=f(t.left-s,t.left)},top:function(t,i){var o,e=i.within,n=e.isWindow?e.scrollTop:e.offset.top,l=i.within.height,s=t.top-i.collisionPosition.marginTop,r=n-s,h=s+i.collisionHeight-l-n;i.collisionHeight>l?r>0&&0>=h?(o=t.top+r+i.collisionHeight-l-n,t.top+=r-o):h>0&&0>=r?t.top=n:r>h?t.top=n+l-i.collisionHeight:t.top=n:r>0?t.top+=r:h>0?t.top-=h:t.top=f(t.top-s,t.top)}},flip:{left:function(t,i){var o,e,n=i.within,l=n.offset.left+n.scrollLeft,f=n.width,r=n.isWindow?n.scrollLeft:n.offset.left,h=t.left-i.collisionPosition.marginLeft,p=h-r,c=h+i.collisionWidth-f-r,a="left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0,d="left"===i.at[0]?i.targetWidth:"right"===i.at[0]?-i.targetWidth:0,g=-2*i.offset[0];0>p?(o=t.left+a+d+g+i.collisionWidth-f-l,(0>o||o<s(p))&&(t.left+=a+d+g)):c>0&&(e=t.left-i.collisionPosition.marginLeft+a+d+g-r,(e>0||s(e)<c)&&(t.left+=a+d+g))},top:function(t,i){var o,e,n=i.within,l=n.offset.top+n.scrollTop,f=n.height,r=n.isWindow?n.scrollTop:n.offset.top,h=t.top-i.collisionPosition.marginTop,p=h-r,c=h+i.collisionHeight-f-r,a="top"===i.my[1],d=a?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,g="top"===i.at[1]?i.targetHeight:"bottom"===i.at[1]?-i.targetHeight:0,u=-2*i.offset[1];0>p?(e=t.top+d+g+u+i.collisionHeight-f-l,(0>e||e<s(p))&&(t.top+=d+g+u)):c>0&&(o=t.top-i.collisionPosition.marginTop+d+g+u-r,(o>0||s(o)<c)&&(t.top+=d+g+u))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}(),t.ui.position});